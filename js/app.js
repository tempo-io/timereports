/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

//! moment-timezone.js
//! version : 0.4.0
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone

function GadgetSummary(e,t){var n=function(t,n){var r=[];for(var i=0;i<e.length;i++)e[i].key==t&&(n==null||n==/[^.]*$/.exec(e[i].label))&&r.push(e[i]);return r},r=function(e){var t="";for(var n=0;n<e.length;n++)t.length>0&&(t+=", "),t+=e[n].labelParam;return t},i=function(e,t){return{text:e,styleClass:t}};this.getSummaryItems=function(){var e=[];e.push(i("Summary ","grey"));var s=r(n("group")),o=r(n("filterOrProjectId","project")),u=r(n("filterOrProjectId","filter")),a=r(n("startDate")),f=r(n("endDate")),l=r(n("groupByField"));return s!=null&&s!=""?(e.push(i("for groups","grey")),e.push(i(s))):t&&(e.push(i("for user","grey")),e.push(i(t.displayName))),o!=null&&o.length!=""&&(e.length>1&&e.push(i("and","grey")),e.push(i("project ","grey")),e.push(i(o))),u!=null&&u.length!=""&&(e.length>1&&e.push(i("and","grey")),e.push(i("filter","grey")),e.push(i(u))),l!=null&&l!=""&&(e.push(i("grouped by","grey")),e.push(i(l))),a!=null&&a!=""&&(e.push(i("from","grey")),e.push(i(a))),f!=null&&f!=""&&(e.push(i("to","grey")),e.push(i(f))),e}}function TimesheetSelectOptions(e,t,n){this.options=[],this.optionClass=e,this.sortableProperty=n!=null?n:"label",this.selected=t||""}function TimesheetGeneralOption(e,t){this.label=e,this.id=t}function PivotRow(e){this.rowKey=e,this.columns={},this.sum=0,this.data=[]}function PivotColumn(e){this.columnKey=e,this.sum=0,this.entries=[],this.value={}}function PivotEntry(e,t,n){this.rowKey=e,this.columnKey=t,this.columnKeys=[t],this.value=n,this.values={},this.values[t.keyValue]=n}function WorkedTimePivotEntry(e,t,n){PivotEntry.apply(this,[e,t,n.timeSpentSeconds]),this.worklog=n}function EmptyPivotEntry(e){this.rowKey=e,this.columnKey={},this.columnKeys=[],this.value=undefined,this.values={}}function TimesheetStrategy(e,t,n){this.rowKeyClass=e,this.columnKeyClass=t,this.options=TimesheetStrategy.getStrategyOptions(n),this.configOptions=n.configOptions}function WorkedTimePivotStrategy(e,t,n){this.rowKeyClass=e,this.columnKeyClass=t,this.options=WorkedTimePivotStrategy.getStrategyOptions(n),this.configOptions=n.configOptions}function TimeTrackingStrategy(e,t){this.rowKeyClass=e,this.options={},this.configOptions=t.configOptions}function PivotTable(e){this.pivotStrategy=e,this.rows={},this.totals={},this.sum=0,this.pivotStrategy.getColumnsFunction&&(this.totals=this.pivotStrategy.getColumnsFunction())}var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.slice(0,v.length-1).concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){var i=l.call(arguments,0);return typeof i[0]!="string"&&i.length===1&&i.push(null),n.apply(e,i.concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("bower_components/almond/almond",function(){}),angular.module("localization",[]).factory("localize",["$http","$rootScope","$window",function(e,t,n){var r={path:"i18n/",language:n.navigator.userLanguage||n.navigator.language,dictionary:undefined,resourceFileLoaded:!1,successCallback:function(e){r.dictionary=e,r.resourceFileLoaded=!0,t.$broadcast("localizeResourcesUpdates")},initLocalizedResources:function(){var t=r.path+r.language+".json";e({method:"GET",url:t,cache:!1}).success(r.successCallback).error(function(){var t=r.path+"default.json";e({method:"GET",url:t,cache:!1}).success(r.successCallback)})},getLocalizedString:function(e){var t="!"+e+"!";if(!r.resourceFileLoaded)return r.initLocalizedResources(),r.resourceFileLoaded=!0,t;if(typeof r.dictionary=="object"){var n=!1,i=[];for(var s=1;s<arguments.length;s++)i.push(arguments[s]);var o=function(e,t){var t=t||null,i=r.dictionary[e];return i===undefined?(n==1,sprintf(e,t)):sprintf(i,t)},u=o(e,i);t!==null&&t!=undefined&&(t=u)}return t},replace:function(e,t){var n=r.getLocalizedString(t);n!==null&&n!==undefined&&n!==""&&e.html(n)}};return r}]).filter("i18n",["localize",function(e){return function(){return e.getLocalizedString.apply(null,arguments)}}]).directive("i18n",["localize",function(e){return{restrict:"EAC",link:function(t,n,r){var i=r.i18n?r.i18n:n.html();e.resourceFileLoaded?e.replace(n,i):deregister=t.$on("localizeResourcesUpdates",function(){deregister(),e.replace(n,i)})}}}]),define("lib/zef-angularjs-i18n/localization",function(){}),function(e){function n(){var e=arguments[0],t=n.cache;if(!t[e]||!t.hasOwnProperty(e))t[e]=n.parse(e);return n.format.call(null,t[e],arguments)}function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function s(e,t){return Array(t+1).join(e)}var t={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,r){var o=1,u=e.length,a="",f,l=[],c,h,p,d,v,m,g=!0,y="";for(c=0;c<u;c++){a=i(e[c]);if(a==="string")l[l.length]=e[c];else if(a==="array"){p=e[c];if(p[2]){f=r[o];for(h=0;h<p[2].length;h++){if(!f.hasOwnProperty(p[2][h]))throw new Error(n("[sprintf] property '%s' does not exist",p[2][h]));f=f[p[2][h]]}}else p[1]?f=r[p[1]]:f=r[o++];i(f)=="function"&&(f=f());if(t.not_string.test(p[8])&&i(f)!="number"&&isNaN(f))throw new TypeError(n("[sprintf] expecting number but found %s",i(f)));t.number.test(p[8])&&(g=f>=0);switch(p[8]){case"b":f=f.toString(2);break;case"c":f=String.fromCharCode(f);break;case"d":case"i":f=parseInt(f,10);break;case"e":f=p[7]?f.toExponential(p[7]):f.toExponential();break;case"f":f=p[7]?parseFloat(f).toFixed(p[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=String(f))&&p[7]?f.substring(0,p[7]):f;break;case"u":f>>>=0;break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}t.number.test(p[8])&&(!g||p[3])?(y=g?"+":"-",f=f.toString().replace(t.sign,"")):y="",v=p[4]?p[4]==="0"?"0":p[4].charAt(1):" ",m=p[6]-(y+f).length,d=p[6]?m>0?s(v,m):"":"",l[l.length]=p[5]?y+f+d:v==="0"?y+d+f:d+y+f}}return l.join("")},n.cache={},n.parse=function(e){var n=e,r=[],i=[],s=0;while(n){if((r=t.text.exec(n))!==null)i[i.length]=r[0];else if((r=t.modulo.exec(n))!==null)i[i.length]="%";else{if((r=t.placeholder.exec(n))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var o=[],u=r[2],a=[];if((a=t.key.exec(u))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=a[1];while((u=u.substring(a[0].length))!=="")if((a=t.key_access.exec(u))!==null)o[o.length]=a[1];else{if((a=t.index_access.exec(u))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=a[1]}r[2]=o}else s|=2;if(s===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=r}n=n.substring(r[0].length)}return i};var r=function(e,t,r){return r=(t||[]).slice(0),r.splice(0,0,e),n.apply(null,r)};typeof exports!="undefined"?(exports.sprintf=n,exports.vsprintf=r):(e.sprintf=n,e.vsprintf=r,typeof define=="function"&&define.amd&&define("bower_components/sprintf/src/sprintf",[],function(){return{sprintf:n,vsprintf:r}}))}(typeof window=="undefined"?this:window),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return gn(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function d(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=l(t)),typeof t._locale!="undefined"&&(e._locale=t._locale);if(p.length>0)for(n in p)r=p[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function m(e){d(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),v===!1&&(v=!0,t.updateOffset(this),v=!1)}function g(e){return e instanceof m||e!=null&&e._isAMomentObject!=null}function y(e){return e<0?Math.ceil(e):Math.floor(e)}function b(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=y(t)),n}function w(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&b(e[o])!==b(t[o]))&&s++;return s+i}function E(){}function T(e){return e?e.toLowerCase().replace("_","-"):e}function N(e){var t=0,n,r,i,s;while(t<e.length){s=T(e[t]).split("-"),n=s.length,r=T(e[t+1]),r=r?r.split("-"):null;while(n>0){i=C(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&w(s,r,!0)>=n-1)break;n--}t++}return null}function C(e){var t=null;if(!S[e]&&typeof module!="undefined"&&module&&module.exports)try{t=x._abbr,require("./locale/"+e),k(t)}catch(n){}return S[e]}function k(e,t){var n;return e&&(typeof t=="undefined"?n=A(e):n=L(e,t),n&&(x=n)),x._abbr}function L(e,t){return t!==null?(t.abbr=e,S[e]=S[e]||new E,S[e].set(t),k(e),S[e]):(delete S[e],null)}function A(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return x;if(!r(e)){t=C(e);if(t)return t;e=[e]}return N(e)}function M(e,t){var n=e.toLowerCase();O[n]=O[n+"s"]=O[t]=e}function _(e){return typeof e=="string"?O[e]||O[e.toLowerCase()]:undefined}function D(e){var t={},n,r;for(r in e)o(e,r)&&(n=_(r),n&&(t[n]=e[r]));return t}function P(e,n){return function(r){return r!=null?(B(this,e,r),t.updateOffset(this,n),this):H(this,e)}}function H(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function B(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function j(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=_(e);if(typeof this[e]=="function")return this[e](t)}return this}function F(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function z(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return F(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function X(e){var t=e.match(I),n,r;for(n=0,r=t.length;n<r;n++)U[t[n]]?t[n]=U[t[n]]:t[n]=W(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function V(e,t){return e.isValid()?(t=$(t,e.localeData()),R[t]=R[t]||X(t),R[t](e)):e.localeData().invalidDate()}function $(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;q.lastIndex=0;while(n>=0&&q.test(e))e=e.replace(q,r),q.lastIndex=0,n-=1;return e}function ft(e){return typeof e=="function"&&Object.prototype.toString.call(e)==="[object Function]"}function lt(e,t,n){at[e]=ft(t)?t:function(e){return e&&n?n:t}}function ct(e,t){return o(at,e)?at[e](t._strict,t._locale):new RegExp(ht(e))}function ht(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function dt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=b(e)});for(n=0;n<e.length;n++)pt[e[n]]=r}function vt(e,t){dt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function mt(e,t,n){t!=null&&o(pt,e)&&pt[e](t,n._a,n,e)}function Tt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Ct(e){return this._months[e.month()]}function Lt(e){return this._monthsShort[e.month()]}function At(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Ot(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Tt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Mt(e){return e!=null?(Ot(this,e),t.updateOffset(this,!0),this):H(this,"Month")}function _t(){return Tt(this.year(),this.month())}function Dt(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[yt]<0||n[yt]>11?yt:n[bt]<1||n[bt]>Tt(n[gt],n[yt])?bt:n[wt]<0||n[wt]>24||n[wt]===24&&(n[Et]!==0||n[St]!==0||n[xt]!==0)?wt:n[Et]<0||n[Et]>59?Et:n[St]<0||n[St]>59?St:n[xt]<0||n[xt]>999?xt:-1,l(e)._overflowDayOfYear&&(t<gt||t>bt)&&(t=bt),l(e).overflow=t),e}function Pt(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Ht(e,t){var n=!0;return u(function(){return n&&(Pt(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function jt(e,t){Bt[e]||(Pt(t),Bt[e]=!0)}function Ut(e){var t,n,r=e._i,i=Ft.exec(r);if(i){l(e).iso=!0;for(t=0,n=It.length;t<n;t++)if(It[t][1].exec(r)){e._f=It[t][0];break}for(t=0,n=qt.length;t<n;t++)if(qt[t][1].exec(r)){e._f+=(i[6]||" ")+qt[t][0];break}r.match(st)&&(e._f+="Z"),ln(e)}else e._isValid=!1}function zt(e){var n=Rt.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}Ut(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function Wt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Xt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Vt(e){return $t(e)?366:365}function $t(e){return e%4===0&&e%100!==0||e%400===0}function Kt(){return $t(this.year())}function Qt(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=yn(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function Gt(e){return Qt(e,this._week.dow,this._week.doy).week}function Zt(){return this._week.dow}function en(){return this._week.doy}function tn(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function nn(e){var t=Qt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function rn(e,t,n,r,i){var s=6+i-r,o=Xt(e,0,1+s),u=o.getUTCDay(),a;return u<i&&(u+=7),n=n!=null?1*n:i,a=1+s+7*(t-1)-u+n,{year:a>0?e:e-1,dayOfYear:a>0?a:Vt(e-1)+a}}function sn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function on(e,t,n){return e!=null?e:t!=null?t:n}function un(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function an(e){var t,n,r=[],i,s;if(e._d)return;i=un(e),e._w&&e._a[bt]==null&&e._a[yt]==null&&fn(e),e._dayOfYear&&(s=on(e._a[gt],i[gt]),e._dayOfYear>Vt(s)&&(l(e)._overflowDayOfYear=!0),n=Xt(s,0,e._dayOfYear),e._a[yt]=n.getUTCMonth(),e._a[bt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[wt]===24&&e._a[Et]===0&&e._a[St]===0&&e._a[xt]===0&&(e._nextDay=!0,e._a[wt]=0),e._d=(e._useUTC?Xt:Wt).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[wt]=24)}function fn(e){var t,n,r,i,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,n=on(t.GG,e._a[gt],Qt(yn(),1,4).year),r=on(t.W,1),i=on(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=on(t.gg,e._a[gt],Qt(yn(),s,o).year),r=on(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),u=rn(n,r,i,o,s),e._a[gt]=u.year,e._dayOfYear=u.dayOfYear}function ln(e){if(e._f===t.ISO_8601){Ut(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=$(e._f,e._locale).match(I)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(ct(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),U[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),mt(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[wt]<=12&&e._a[wt]>0&&(l(e).bigHour=undefined),e._a[wt]=cn(e._locale,e._a[wt],e._meridiem),an(e),Dt(e)}function cn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function hn(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=d({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],ln(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function pn(e){if(e._d)return;var t=D(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],an(e)}function dn(e){var t=new m(Dt(vn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function vn(e){var t=e._i,n=e._f;return e._locale=e._locale||A(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),g(t)?new m(Dt(t)):(r(n)?hn(e):n?ln(e):i(t)?e._d=t:mn(e),e))}function mn(e){var n=e._i;n===undefined?e._d=new Date:i(n)?e._d=new Date(+n):typeof n=="string"?zt(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),an(e)):typeof n=="object"?pn(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function gn(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,dn(s)}function yn(e,t,n,r){return gn(e,t,n,r,!1)}function En(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return yn();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function Sn(){var e=[].slice.call(arguments,0);return En("isBefore",e)}function xn(){var e=[].slice.call(arguments,0);return En("isAfter",e)}function Tn(e){var t=D(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=A(),this._bubble()}function Nn(e){return e instanceof Tn}function Cn(e,t){z(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+F(~~(e/60),2)+t+F(~~e%60,2)})}function Ln(e){var t=(e||"").match(st)||[],n=t[t.length-1]||[],r=(n+"").match(kn)||["-",0,0],i=+(r[1]*60)+b(r[2]);return r[0]==="+"?i:-i}function An(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(g(e)||i(e)?+e:+yn(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):yn(e).local()}function On(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Mn(e,n){var r=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=Ln(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=On(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Kn(this,Wn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:On(this)}function _n(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Dn(e){return this.utcOffset(0,e)}function Pn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(On(this),"m")),this}function Hn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Ln(this._i)),this}function Bn(e){return e=e?yn(e).utcOffset():0,(this.utcOffset()-e)%60===0}function jn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Fn(){if(typeof this._isDSTShifted!="undefined")return this._isDSTShifted;var e={};d(e,this),e=vn(e);if(e._a){var t=e._isUTC?a(e._a):yn(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function In(){return!this._isUTC}function qn(){return this._isUTC}function Rn(){return this._isUTC&&this._offset===0}function Wn(e,t){var n=e,r=null,i,s,u;return Nn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=Un.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:b(r[bt])*i,h:b(r[wt])*i,m:b(r[Et])*i,s:b(r[St])*i,ms:b(r[xt])*i}):(r=zn.exec(e))?(i=r[1]==="-"?-1:1,n={y:Xn(r[2],i),M:Xn(r[3],i),d:Xn(r[4],i),h:Xn(r[5],i),m:Xn(r[6],i),s:Xn(r[7],i),w:Xn(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=$n(yn(n.from),yn(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new Tn(n),Nn(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function Xn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Vn(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function $n(e,t){var n;return t=An(t,e),e.isBefore(t)?n=Vn(e,t):(n=Vn(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Jn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(jt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=Wn(n,r),Kn(this,i,e),this}}function Kn(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&B(e,"Date",H(e,"Date")+o*r),u&&Ot(e,H(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function Yn(e,t){var n=e||yn(),r=An(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[s]||this.localeData().calendar(s,this,yn(n)))}function Zn(){return new m(this)}function er(e,t){var n;return t=_(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:yn(e),+this>+e):(n=g(e)?+e:+yn(e),n<+this.clone().startOf(t))}function tr(e,t){var n;return t=_(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:yn(e),+this<+e):(n=g(e)?+e:+yn(e),+this.clone().endOf(t)<n)}function nr(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function rr(e,t){var n;return t=_(t||"millisecond"),t==="millisecond"?(e=g(e)?e:yn(e),+this===+e):(n=+yn(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function ir(e,t,n){var r=An(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o;return t=_(t),t==="year"||t==="month"||t==="quarter"?(o=sr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:y(o)}function sr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function or(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ur(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():V(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):V(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ar(e){var n=V(this,e||t.defaultFormat);return this.localeData().postformat(n)}function fr(e,t){return this.isValid()?Wn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function lr(e){return this.from(yn(),e)}function cr(e,t){return this.isValid()?Wn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hr(e){return this.to(yn(),e)}function pr(e){var t;return e===undefined?this._locale._abbr:(t=A(e),t!=null&&(this._locale=t),this)}function vr(){return this._locale}function mr(e){e=_(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function gr(e){return e=_(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function yr(){return+this._d-(this._offset||0)*6e4}function br(){return Math.floor(+this/1e3)}function wr(){return this._offset?new Date(+this):this._d}function Er(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xr(){return c(this)}function Tr(){return u({},l(this))}function Nr(){return l(this).overflow}function Cr(e,t){z(0,[e,e.length],0,t)}function kr(e,t,n){return Qt(yn([e,11,31+t-n]),t,n).week}function Lr(e){var t=Qt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")}function Ar(e){var t=Qt(this,1,4).year;return e==null?t:this.add(e-t,"y")}function Or(){return kr(this.year(),1,4)}function Mr(){var e=this.localeData()._week;return kr(this.year(),e.dow,e.doy)}function _r(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Pr(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Br(e){return this._weekdays[e.day()]}function Fr(e){return this._weekdaysShort[e.day()]}function qr(e){return this._weekdaysMin[e.day()]}function Rr(e){var t,n,r;this._weekdaysParse=this._weekdaysParse||[];for(t=0;t<7;t++){this._weekdaysParse[t]||(n=yn([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}}function Ur(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Pr(e,this.localeData()),this.add(e-t,"d")):t}function zr(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Wr(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)}function Xr(e,t){z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vr(e,t){return t._meridiemParse}function $r(e){return(e+"").toLowerCase().charAt(0)==="p"}function Kr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function ei(e,t){t[xt]=b(("0."+e)*1e3)}function ni(){return this._isUTC?"UTC":""}function ri(){return this._isUTC?"Coordinated Universal Time":""}function oi(e){return yn(e*1e3)}function ui(){return yn.apply(null,arguments).parseZone()}function fi(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.call(t,n):r}function ci(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function pi(){return this._invalidDate}function mi(e){return this._ordinal.replace("%d",e)}function gi(e){return e}function bi(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)}function wi(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)}function Ei(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function xi(e,t,n,r){var i=A(),s=a().set(r,t);return i[n](s,e)}function Ti(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return xi(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=xi(e,s,n,i);return o}function Ni(e,t){return Ti(e,t,"months",12,"month")}function Ci(e,t){return Ti(e,t,"monthsShort",12,"month")}function ki(e,t){return Ti(e,t,"weekdays",7,"day")}function Li(e,t){return Ti(e,t,"weekdaysShort",7,"day")}function Ai(e,t){return Ti(e,t,"weekdaysMin",7,"day")}function Mi(){var e=this._data;return this._milliseconds=Oi(this._milliseconds),this._days=Oi(this._days),this._months=Oi(this._months),e.milliseconds=Oi(e.milliseconds),e.seconds=Oi(e.seconds),e.minutes=Oi(e.minutes),e.hours=Oi(e.hours),e.months=Oi(e.months),e.years=Oi(e.years),this}function _i(e,t,n,r){var i=Wn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Di(e,t){return _i(this,e,t,1)}function Pi(e,t){return _i(this,e,t,-1)}function Hi(e){return e<0?Math.floor(e):Math.ceil(e)}function Bi(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Hi(Fi(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=y(e/1e3),r.seconds=i%60,s=y(i/60),r.minutes=s%60,o=y(s/60),r.hours=o%24,t+=y(o/24),a=y(ji(t)),n+=a,t-=Hi(Fi(a)),u=y(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function ji(e){return e*4800/146097}function Fi(e){return e*146097/4800}function Ii(e){var t,n,r=this._milliseconds;e=_(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+ji(t),e==="month"?n:n/12;t=this._days+Math.round(Fi(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function qi(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+b(this._months/12)*31536e6}function Ri(e){return function(){return this.as(e)}}function Qi(e){return e=_(e),this[e+"s"]()}function Gi(e){return function(){return this._data[e]}}function ss(){return y(this.days()/7)}function as(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function fs(e,t,n){var r=Wn(e).abs(),i=os(r.as("s")),s=os(r.as("m")),o=os(r.as("h")),u=os(r.as("d")),a=os(r.as("M")),f=os(r.as("y")),l=i<us.s&&["s",i]||s===1&&["m"]||s<us.m&&["mm",s]||o===1&&["h"]||o<us.h&&["hh",o]||u===1&&["d"]||u<us.d&&["dd",u]||a===1&&["M"]||a<us.M&&["MM",a]||f===1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,as.apply(null,l)}function ls(e,t){return us[e]===undefined?!1:t===undefined?us[e]:(us[e]=t,!0)}function cs(e){var t=this.localeData(),n=fs(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function ps(){var e=hs(this._milliseconds)/1e3,t=hs(this._days),n=hs(this._months),r,i,s;r=y(e/60),i=y(r/60),e%=60,r%=60,s=y(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,p=t.momentProperties=[],v=!1,S={},x,O={},I=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},U={},J=/\d/,K=/\d\d/,Q=/\d{3}/,G=/\d{4}/,Y=/[+-]?\d{6}/,Z=/\d\d?/,et=/\d{1,3}/,tt=/\d{1,4}/,nt=/[+-]?\d{1,6}/,rt=/\d+/,it=/[+-]?\d+/,st=/Z|[+-]\d\d:?\d\d/gi,ot=/[+-]?\d+(\.\d{1,3})?/,ut=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,at={},pt={},gt=0,yt=1,bt=2,wt=3,Et=4,St=5,xt=6;z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),z("MMMM",0,0,function(e){return this.localeData().months(this,e)}),M("month","M"),lt("M",Z),lt("MM",Z,K),lt("MMM",ut),lt("MMMM",ut),dt(["M","MM"],function(e,t){t[yt]=b(e)-1}),dt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[yt]=i:l(n).invalidMonth=e});var Nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Bt={};t.suppressDeprecationWarnings=!1;var Ft=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,It=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],qt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Rt=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Ht("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),M("year","y"),lt("Y",it),lt("YY",Z,K),lt("YYYY",tt,G),lt("YYYYY",nt,Y),lt("YYYYYY",nt,Y),dt(["YYYYY","YYYYYY"],gt),dt("YYYY",function(e,n){n[gt]=e.length===2?t.parseTwoDigitYear(e):b(e)}),dt("YY",function(e,n){n[gt]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var Jt=P("FullYear",!1);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),lt("w",Z),lt("ww",Z,K),lt("W",Z),lt("WW",Z,K),vt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});var Yt={dow:0,doy:6};z("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),lt("DDD",et),lt("DDDD",Q),dt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),t.ISO_8601=function(){};var bn=Ht("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=yn.apply(null,arguments);return e<this?this:e}),wn=Ht("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=yn.apply(null,arguments);return e>this?this:e});Cn("Z",":"),Cn("ZZ",""),lt("Z",st),lt("ZZ",st),dt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ln(e)});var kn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Un=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Wn.fn=Tn.prototype;var Qn=Jn(1,"add"),Gn=Jn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var dr=Ht("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Cr("gggg","weekYear"),Cr("ggggg","weekYear"),Cr("GGGG","isoWeekYear"),Cr("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),lt("G",it),lt("g",it),lt("GG",Z,K),lt("gg",Z,K),lt("GGGG",tt,G),lt("gggg",tt,G),lt("GGGGG",nt,Y),lt("ggggg",nt,Y),vt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),vt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),z("Q",0,0,"quarter"),M("quarter","Q"),lt("Q",J),dt("Q",function(e,t){t[yt]=(b(e)-1)*3}),z("D",["DD",2],"Do","date"),M("date","D"),lt("D",Z),lt("DD",Z,K),lt("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),dt(["D","DD"],bt),dt("Do",function(e,t){t[bt]=b(e.match(Z)[0],10)});var Dr=P("Date",!0);z("d",0,"do","day"),z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),lt("d",Z),lt("e",Z),lt("E",Z),lt("dd",ut),lt("ddd",ut),lt("dddd",ut),vt(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);r!=null?t.d=r:l(n).invalidWeekday=e}),vt(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var Hr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ir="Su_Mo_Tu_We_Th_Fr_Sa".split("_");z("H",["HH",2],0,"hour"),z("h",["hh",2],0,function(){return this.hours()%12||12}),Xr("a",!0),Xr("A",!1),M("hour","h"),lt("a",Vr),lt("A",Vr),lt("H",Z),lt("h",Z),lt("HH",Z,K),lt("hh",Z,K),dt(["H","HH"],wt),dt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),dt(["h","hh"],function(e,t,n){t[wt]=b(e),l(n).bigHour=!0});var Jr=/[ap]\.?m?\.?/i,Qr=P("Hours",!0);z("m",["mm",2],0,"minute"),M("minute","m"),lt("m",Z),lt("mm",Z,K),dt(["m","mm"],Et);var Gr=P("Minutes",!1);z("s",["ss",2],0,"second"),M("second","s"),lt("s",Z),lt("ss",Z,K),dt(["s","ss"],St);var Yr=P("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return this.millisecond()*10}),z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),M("millisecond","ms"),lt("S",et,J),lt("SS",et,K),lt("SSS",et,Q);var Zr;for(Zr="SSSS";Zr.length<=9;Zr+="S")lt(Zr,rt);for(Zr="S";Zr.length<=9;Zr+="S")dt(Zr,ei);var ti=P("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var ii=m.prototype;ii.add=Qn,ii.calendar=Yn,ii.clone=Zn,ii.diff=ir,ii.endOf=gr,ii.format=ar,ii.from=fr,ii.fromNow=lr,ii.to=cr,ii.toNow=hr,ii.get=j,ii.invalidAt=Nr,ii.isAfter=er,ii.isBefore=tr,ii.isBetween=nr,ii.isSame=rr,ii.isValid=xr,ii.lang=dr,ii.locale=pr,ii.localeData=vr,ii.max=wn,ii.min=bn,ii.parsingFlags=Tr,ii.set=j,ii.startOf=mr,ii.subtract=Gn,ii.toArray=Er,ii.toObject=Sr,ii.toDate=wr,ii.toISOString=ur,ii.toJSON=ur,ii.toString=or,ii.unix=br,ii.valueOf=yr,ii.year=Jt,ii.isLeapYear=Kt,ii.weekYear=Lr,ii.isoWeekYear=Ar,ii.quarter=ii.quarters=_r,ii.month=Mt,ii.daysInMonth=_t,ii.week=ii.weeks=tn,ii.isoWeek=ii.isoWeeks=nn,ii.weeksInYear=Mr,ii.isoWeeksInYear=Or,ii.date=Dr,ii.day=ii.days=Ur,ii.weekday=zr,ii.isoWeekday=Wr,ii.dayOfYear=sn,ii.hour=ii.hours=Qr,ii.minute=ii.minutes=Gr,ii.second=ii.seconds=Yr,ii.millisecond=ii.milliseconds=ti,ii.utcOffset=Mn,ii.utc=Dn,ii.local=Pn,ii.parseZone=Hn,ii.hasAlignedHourOffset=Bn,ii.isDST=jn,ii.isDSTShifted=Fn,ii.isLocal=In,ii.isUtcOffset=qn,ii.isUtc=Rn,ii.isUTC=Rn,ii.zoneAbbr=ni,ii.zoneName=ri,ii.dates=Ht("dates accessor is deprecated. Use date instead.",Dr),ii.months=Ht("months accessor is deprecated. Use month instead",Mt),ii.years=Ht("years accessor is deprecated. Use year instead",Jt),ii.zone=Ht("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",_n);var si=ii,ai={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},li={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},hi="Invalid date",di="%d",vi=/\d{1,2}/,yi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Si=E.prototype;Si._calendar=ai,Si.calendar=fi,Si._longDateFormat=li,Si.longDateFormat=ci,Si._invalidDate=hi,Si.invalidDate=pi,Si._ordinal=di,Si.ordinal=mi,Si._ordinalParse=vi,Si.preparse=gi,Si.postformat=gi,Si._relativeTime=yi,Si.relativeTime=bi,Si.pastFuture=wi,Si.set=Ei,Si.months=Ct,Si._months=Nt,Si.monthsShort=Lt,Si._monthsShort=kt,Si.monthsParse=At,Si.week=Gt,Si._week=Yt,Si.firstDayOfYear=en,Si.firstDayOfWeek=Zt,Si.weekdays=Br,Si._weekdays=Hr,Si.weekdaysMin=qr,Si._weekdaysMin=Ir,Si.weekdaysShort=Fr,Si._weekdaysShort=jr,Si.weekdaysParse=Rr,Si.isPM=$r,Si._meridiemParse=Jr,Si.meridiem=Kr,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=b(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=Ht("moment.lang is deprecated. Use moment.locale instead.",k),t.langData=Ht("moment.langData is deprecated. Use moment.localeData instead.",A);var Oi=Math.abs,Ui=Ri("ms"),zi=Ri("s"),Wi=Ri("m"),Xi=Ri("h"),Vi=Ri("d"),$i=Ri("w"),Ji=Ri("M"),Ki=Ri("y"),Yi=Gi("milliseconds"),Zi=Gi("seconds"),es=Gi("minutes"),ts=Gi("hours"),ns=Gi("days"),rs=Gi("months"),is=Gi("years"),os=Math.round,us={s:45,m:45,h:22,d:26,M:11},hs=Math.abs,ds=Tn.prototype;ds.abs=Mi,ds.add=Di,ds.subtract=Pi,ds.as=Ii,ds.asMilliseconds=Ui,ds.asSeconds=zi,ds.asMinutes=Wi,ds.asHours=Xi,ds.asDays=Vi,ds.asWeeks=$i,ds.asMonths=Ji,ds.asYears=Ki,ds.valueOf=qi,ds._bubble=Bi,ds.get=Qi,ds.milliseconds=Yi,ds.seconds=Zi,ds.minutes=es,ds.hours=ts,ds.days=ns,ds.weeks=ss,ds.months=rs,ds.years=is,ds.humanize=cs,ds.toISOString=ps,ds.toString=ps,ds.toJSON=ps,ds.locale=pr,ds.localeData=vr,ds.toIsoString=Ht("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ps),ds.lang=dr,z("X",0,0,"unix"),z("x",0,0,"valueOf"),lt("x",it),lt("X",ot),dt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),dt("x",function(e,t,n){n._d=new Date(b(e))}),t.version="2.10.6",n(yn),t.fn=si,t.min=Sn,t.max=xn,t.utc=a,t.unix=oi,t.months=Ni,t.isDate=i,t.locale=k,t.invalid=h,t.duration=Wn,t.isMoment=g,t.weekdays=ki,t.parseZone=ui,t.localeData=A,t.isDuration=Nn,t.monthsShort=Ci,t.weekdaysMin=Ai,t.defineLocale=L,t.weekdaysShort=Li,t.normalizeUnits=_,t.relativeTimeThreshold=ls;var vs=t;return vs}),function(e,t){"use strict";typeof define=="function"&&define.amd?define("bower_components/moment-timezone/builds/moment-timezone-with-data-2010-2020",["moment"],t):typeof exports=="object"?module.exports=t(require("moment")):t(e.moment)}(this,function(e){"use strict";function a(e){return e>96?e-87:e>64?e-29:e-48}function f(e){var t=0,n=e.split("."),r=n[0],i=n[1]||"",s=1,o,u=0,f=1;e.charCodeAt(0)===45&&(t=1,f=-1);for(t;t<r.length;t++)o=a(r.charCodeAt(t)),u=60*u+o;for(t=0;t<i.length;t++)s/=60,o=a(i.charCodeAt(t)),u+=o*s;return u*f}function l(e){for(var t=0;t<e.length;t++)e[t]=f(e[t])}function c(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+e[n]*6e4);e[t-1]=Infinity}function h(e,t){var n=[],r;for(r=0;r<t.length;r++)n[r]=e[t[r]];return n}function p(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),i=t[4].split(" ");return l(n),l(r),l(i),c(i,r.length),{name:t[0],abbrs:h(t[1].split(" "),r),offsets:h(n,r),untils:i}}function d(e){e&&this._set(p(e))}function v(e){return(e||"").toLowerCase().replace(/\//g,"_")}function m(e){var t,r,s;typeof e=="string"&&(e=[e]);for(t=0;t<e.length;t++)r=e[t].split("|")[0],s=v(r),n[s]=e[t],i[s]=r}function g(e,t){e=v(e);var s=n[e],o;return s instanceof d?s:typeof s=="string"?(s=new d(s),n[e]=s,s):r[e]&&t!==g&&(o=g(r[e],g))?(s=n[e]=new d,s._set(o),s.name=i[e],s):null}function y(){var e,t=[];for(e in i)i.hasOwnProperty(e)&&(n[e]||n[r[e]])&&i[e]&&t.push(i[e]);return t.sort()}function b(e){var t,n,s,o;typeof e=="string"&&(e=[e]);for(t=0;t<e.length;t++)n=e[t].split("|"),s=v(n[0]),o=v(n[1]),r[s]=o,i[s]=n[0],r[o]=s,i[o]=n[1]}function w(e){m(e.zones),b(e.links),T.dataVersion=e.version}function E(e){return E.didShowError||(E.didShowError=!0,x("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!g(e)}function S(e){return!!e._a&&e._tzm===undefined}function x(e){typeof console!="undefined"&&typeof console.error=="function"&&console.error(e)}function T(t){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],i=g(r),s=e.utc.apply(null,n);return i&&!e.isMoment(t)&&S(s)&&s.add(i.parse(s),"minutes"),s.tz(r),s}function C(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function k(e){return function(){return this._z=null,e.apply(this,arguments)}}if(e.tz!==undefined)return x("Moment Timezone "+e.tz.version+" was already loaded "+(e.tz.dataVersion?"with data from ":"without any data")+e.tz.dataVersion),e;var t="0.4.0",n={},r={},i={},s=e.version.split("."),o=+s[0],u=+s[1];(o<2||o===2&&u<6)&&x("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),d.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},_index:function(e){var t=+e,n=this.untils,r;for(r=0;r<n.length;r++)if(t<n[r])return r},parse:function(e){var t=+e,n=this.offsets,r=this.untils,i=r.length-1,s,o,u,a;for(a=0;a<i;a++){s=n[a],o=n[a+1],u=n[a?a-1:a],s<o&&T.moveAmbiguousForward?s=o:s>u&&T.moveInvalidForward&&(s=u);if(t<r[a]-s*6e4)return n[a]}return n[i]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},T.version=t,T.dataVersion="",T._zones=n,T._links=r,T._names=i,T.add=m,T.link=b,T.load=w,T.zone=g,T.zoneExists=E,T.names=y,T.Zone=d,T.unpack=p,T.unpackBase60=f,T.needsOffset=S,T.moveInvalidForward=!0,T.moveAmbiguousForward=!1;var N=e.fn;e.tz=T,e.defaultZone=null,e.updateOffset=function(t,n){var r=e.defaultZone,i;t._z===undefined&&(r&&S(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(r.parse(t),"minutes")),t._z=r),t._z&&(i=t._z.offset(t),Math.abs(i)<16&&(i/=60),t.utcOffset!==undefined?t.utcOffset(-i,n):t.zone(i,n))},N.tz=function(t){if(t)return this._z=g(t),this._z?e.updateOffset(this):x("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this;if(this._z)return this._z.name},N.zoneName=C(N.zoneName),N.zoneAbbr=C(N.zoneAbbr),N.utc=k(N.utc),e.tz.setDefault=function(t){return(o<2||o===2&&u<9)&&x("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?g(t):null,e};var L=e.momentProperties;return Object.prototype.toString.call(L)==="[object Array]"?(L.push("_z"),L.push("_a")):L&&(L._z=null),w({version:"2015d",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Merida|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT CLT|30 40 30|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST EAST|50 60 50|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Merida|America/Mexico_City","America/Merida|America/Monterrey","America/Merida|Mexico/General","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|Europe/Volgograd","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),e}),define("timesheetUtils",["moment"],function(e){return window.TimesheetUtils={},window.moment=e,TimesheetUtils.getLastMondayDate=function(){return TimesheetUtils.getPrevMonday(new Date)},TimesheetUtils.getPrevMonday=function(e){return TimesheetUtils.getNearestDayOfTheWeek(e,1,!0)},TimesheetUtils.getNextSunday=function(e){return TimesheetUtils.getNearestDayOfTheWeek(e,0,!1)},TimesheetUtils.getNearestDayOfTheWeek=function(e,t,n){while(e.getDay()!=t)e=TimesheetUtils.addDays(e,n?-1:1);return TimesheetUtils.truncateTime(e)},TimesheetUtils.getFirstDayOfTheMonth=function(t){return t==null&&(t=new Date),TimesheetUtils.truncateTime(e(t).startOf("month").toDate())},TimesheetUtils.getLastDayOfTheMonth=function(t){return t==null&&(t=new Date),TimesheetUtils.truncateTime(e(t).endOf("month").toDate())},TimesheetUtils.truncateTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},TimesheetUtils.truncateMinutes=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours())},TimesheetUtils.convertDate=function(t,n){if(n){var r=e.tz(t,n).format().replace(/[+-]\d\d:?\d\d$/,""),i=e(r).toDate();return i}return e(t).toDate()},TimesheetUtils.getTimezoneOffsetBak=function(t){function i(e,t){var n=""+e;while(n.length<t)n="0"+n;return n}var n=e(t).toDate(),r=n.getTime();if(TimesheetUtils.timezoneOffset==undefined)TimesheetUtils.timezoneOffset={};else if(TimesheetUtils.timezoneOffset[r]!==undefined)return TimesheetUtils.timezoneOffset[r];var s=n.getTimezoneOffset();return TimesheetUtils.timezoneOffset[r]=(s<0?"+":"-")+i(parseInt(Math.abs(s/60)),2)+i(Math.abs(s%60),2),TimesheetUtils.timezoneOffset[r]},TimesheetUtils.addTime=function(t,n,r){return e(t).add(n,r).toDate()},TimesheetUtils.addDays=function(e,t){return TimesheetUtils.addTime(e,t,"days")},TimesheetUtils.addMonths=function(e,t){return TimesheetUtils.addTime(e,t,"months")},TimesheetUtils.addHours=function(e,t){return TimesheetUtils.addTime(e,t,"hours")},TimesheetUtils.sameDay=function(e,t){return e.getDate()==t.getDate()&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()},TimesheetUtils.isDate=function(t){return typeof t=="string"&&e(new Date(t)).isValid()},TimesheetUtils.colspan=function(e){if(e!=null){var t=e.rows,n=Object.keys(t);if(n.length>0){var r=t[n[0]].rowKey;if(r.issue||r.field)return 5}}return 1},TimesheetUtils.getPrettyHours=function(e){return e>0?e/3600+"h":""},TimesheetUtils.getWeekNumber=function(t){return e(t).isoWeek()},TimesheetUtils.getMonthKey=function(t){return e(t).format("YYYY-MM")},TimesheetUtils.getNormalizedWeekNumber=function(e){var t=TimesheetUtils.getWeekNumber(e);return TimesheetUtils.normalizeNumber(t)},TimesheetUtils.normalizeNumber=function(e){return(e<10?"0":"")+e},TimesheetUtils.formatDate=function(t){return e(t).toJSON().replace("Z","+0000")},TimesheetUtils.getHoursForDay=function(e){var t=[],n=e.startDate,r=e.endDate;if(n.getTime()<=r.getTime()){var i=new Date;while(n.getHours()!=r.getHours()){var s=n.getHours()==i.getHours();t.push({date:n,isToday:s}),n=TimesheetUtils.addHours(n,1)}}return t},TimesheetUtils.getDatesForWeek=function(e){var t=[],n=e.startDate,r=e.endDate;if(n.getTime()<=r.getTime()){r=TimesheetUtils.addDays(r,1);while(!TimesheetUtils.sameDay(n,r)){var i=TimesheetUtils.sameDay(n,TimesheetUtils.truncateTime(new Date));t.push({date:n,isToday:i}),n=TimesheetUtils.addDays(n,1)}}return t},TimesheetUtils.getWeeksForMonth=function(e){var t=[],n=TimesheetUtils.getPrevMonday(e.startDate),r=TimesheetUtils.getNextSunday(e.endDate),i=TimesheetUtils.getWeekNumber(new Date),s=n;while(s.getTime()<=r.getTime()){var o=TimesheetUtils.getWeekNumber(s);t.push({week:"Week "+o,date:s,isToday:o==i}),s=TimesheetUtils.addDays(s,7)}return t},TimesheetUtils.getMonthForYear=function(t){var n=[],r=TimesheetUtils.getFirstDayOfTheMonth(t.startDate),i=TimesheetUtils.getLastDayOfTheMonth(t.endDate),s=TimesheetUtils.getMonthKey(new Date),o=r;while(o.getTime()<=i.getTime()){var u=TimesheetUtils.getMonthKey(o);n.push({month:e.months()[u],date:o,isToday:u==s}),o=TimesheetUtils.addMonths(o,1)}return n},TimesheetUtils.changeDate=function(e,t,n,r){return n&&e==null?null:(e==null&&(e=r?TimesheetUtils.getFirstDayOfTheMonth():TimesheetUtils.getLastMondayDate()),e=r?TimesheetUtils.addMonths(e,t):TimesheetUtils.addDays(e,t),TimesheetUtils.formatDateForSearch(e))},TimesheetUtils.formatDateForSearch=function(e){return e.getFullYear()+"-"+TimesheetUtils.normalizeNumber(e.getMonth()+1)+"-"+TimesheetUtils.normalizeNumber(e.getDate())},TimesheetUtils.filterFields=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];r.schema!=null&&(["number","string","project","issuetype","securitylevel","resolution","user","priority","status","datetime","date"].indexOf(r.schema.type)>=0&&["summary","description"].indexOf(r.id)==-1||r.schema.type=="array")&&t.push(r)}return t},TimesheetUtils.sortByProperty=function(e,t,n){var r=!n||-1;return e.sort(function(e,n){return r*e[t].localeCompare(n[t])})},TimesheetUtils.getJson=function(e){return angular.isString(e)&&(e=e!=""?JSON.parse(e):{}),e},TimesheetUtils.makeUISelectList=function(e,t){var n=function(e){return{id:e,label:e}},r=[];t&&r.push(n(""));for(var i=0;i<e.length;i++)r.push(n(e[i]));return r},TimesheetUtils.setDynamicParams=function(e){AP.require("events",function(t){t.on("getDynamicParams",function(){t.emit("loadDyamicParams",e),t.offAll("getDynamicParams")})})},TimesheetUtils.getDynamicParams=function(e){AP.require("events",function(t){t.on("loadDyamicParams",function(n){t.offAll("setFeedbackToDelete"),e(n)}),t.emit("getDynamicParams")})},TimesheetUtils.convertHoursToFormat24=function(e,t){return t?(e+12)%24:e},TimesheetUtils.convertHoursToFormat12=function(e){return e>12||e==0?{hour:Math.abs(e-12),pm:!0}:{hour:e,pm:!1}},TimesheetUtils.getCurrentTimeMs=function(){var e=new Date;return(e.getHours()*60*60+e.getMinutes()*60)*1e3},TimesheetUtils.getTimeSpentMs=function(e,t){if(!e)return 0;var n=function(e){var n=t.defaultUnit,r=0;if(isNaN(e)){var i=/([0-9]*)([a-zA-Z]*)/;if(e.match(i)){var s=i.exec(e);r=s[1],n=s[2]}}else r=parseInt(e);var o=1e3,u=60*o,a=60*u,f=t.workingHoursPerDay*a,l=t.workingDaysPerWeek*f;switch(n){case"w":case"week":return r*l;case"d":case"day":return r*f;case"h":case"hour":return r*a;case"m":case"minute":return r*u;case"s":return r*o}},r=e.split(" "),i=0;for(var s=0;s<r.length;s++)i+=n(r[s]);return i},TimesheetUtils.getSearchQueryBuilder=function(e){var t=function(e,t){var n=null;if(e.filterOrProjectId){var r=angular.isArray(e.filterOrProjectId)?e.filterOrProjectId:e.filterOrProjectId.split(",");n=[];for(var i=0;i<r.length;i++)r[i].indexOf(t)==0&&n.push(r[i].split(t)[1])}return n},n=function(e,t){var n=new TimesheetUtils.queryBuilder(" or ");for(var r=0;r<t.length;r++)n.addQuery(e,'"'+t[r]+'"');return n},r=t(e,"filter_"),i=t(e,"project_");!r&&!i&&e.projectKey&&(i=[e.projectKey]);var s=new TimesheetUtils.queryBuilder(" and ");return r&&r.length>0&&(r.length==1?s.addQuery("filter",r[0]):s.addQueryBuilder(n("filter",r))),i&&i.length>0&&(i.length==1?s.addQuery("project",'"'+i[0]+'"'):s.addQueryBuilder(n("project",i))),s},TimesheetUtils.queryBuilder=function(e){var t=[];e=e||"&",this.addQuery=function(e,n,r){return r=r||"=",n!=null&&n!=""&&t.push(e+r+n),this},this.addQueryWithFunc=function(e,t,n,r){this.addQuery(e,r+"("+t+")",n)},this.addQueryBuilder=function(e){t.push("("+e.build()+")")},this.build=function(){return this.isEmpty()?"":t.join(e)},this.isEmpty=function(){return t==null||t.length==0}},TimesheetUtils.closeDialogFunctions={submit:function(){AP.Dialog.close("submit")},cancel:function(){AP.Dialog.close("cancel")}},TimesheetUtils.normalizeObject=function(e,t){var n=Object.keys(e);for(var r=0;r<n.length;r++)(e[n[r]]==null||t&&(e[n[r]]==""||e[n[r]]==[]))&&delete e[n[r]];return e},TimesheetUtils});var configurationModule=angular.module("configuration",[]);configurationModule.service("configurationService",["$q","$http","dataService","applicationLoggingService",function(e,t,n,r){var i="configuration";this.data={config:{},allGroups:null,allCompositionIssueLinks:null,allParentIssueFields:null},this.defaults=[{key:"auditorsGroups"},{key:"compositionIssueLink"},{key:"parentIssueField"},{key:"onErrorIgnore"}],this.getConfiguration=function(){var t=this,r=e.defer();if(Object.keys(t.data.config).length==0){for(var s=0;s<this.defaults.length;s++){var o=this.defaults[s];this.data.config[o.key]=o}n.getProperty(i).then(function(e){for(var n=0;n<e.length;n++){var i=e[n];i.key in t.data.config&&(t.data.config[i.key]=i)}r.resolve(t.data.config)})}else r.resolve(t.data.config);return r.promise},this.saveConfiguration=function(e){var t=e.val&&(!angular.isArray(e.val)||e.val.length>0);return t?e.id?this.updateConfiguration(e):this.addConfiguration(e):this.deleteConfiguration(e)},this.addConfiguration=function(t){var r=e.defer(),s=this;return n.getProperty(i,[]).then(function(e){var s=e.length>0?e[e.length-1]:{id:0},o=angular.copy(t);o.id=s.id+1,e.push(o),n.setProperty(i,e).then(function(){r.resolve(o)})}),r.promise},this.updateConfiguration=function(t){var r=e.defer(),s=this;return n.getProperty(i,[]).then(function(e){var o=s.indexById(t.id,e),u=angular.copy(t);e[o]=u,n.setProperty(i,e).then(function(){r.resolve(u)})}),r.promise},this.deleteConfiguration=function(t){var r=e.defer(),s=this;return n.getProperty(i,[]).then(function(e){var o=s.indexById(t.id,e);e.splice(o,1),n.setProperty(i,e).then(function(){r.resolve({key:t.key})})}),r.promise},this.getGroups=function(){var t=this,n=e.defer();return t.data.allGroups==null?window.AP.request({url:"/rest/api/2/groups/picker",dataType:"json",success:function(e){var r=TimesheetUtils.getJson(e);t.data.allGroups=[];for(var i=0;i<r.groups.length;i++)t.data.allGroups.push(r.groups[i].name);n.resolve(t.data.allGroups)},error:r.error}):n.resolve(t.data.allGroups),n.promise},this.getAllCompositionIssueLinks=function(){var t=this,n=e.defer();return t.data.allCompositionIssueLinks==null?window.AP.request({url:"/rest/api/2/issueLinkType",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),t.data.allCompositionIssueLinks=[];for(var r=0;r<e.issueLinkTypes.length;r++)t.data.allCompositionIssueLinks.push(e.issueLinkTypes[r].name);n.resolve(t.data.allCompositionIssueLinks)},error:r.error}):n.resolve(t.data.allCompositionIssueLinks),n.promise},this.getAllParentIssueFields=function(){var t=this,n=e.defer();return t.data.allParentIssueFields==null?AP.request({url:"/rest/api/2/field",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),t.data.allParentIssueFields=[];for(var r=0;r<e.length;r++)e[r].custom==1&&e[r].schema!=null&&e[r].schema.custom=="com.pyxis.greenhopper.jira:gh-epic-link"&&t.data.allParentIssueFields.push({id:e[r].id,name:e[r].name});n.resolve(t.data.allParentIssueFields)},error:r.error}):n.resolve(t.data.allParentIssueFields),n.promise},this.resetState=function(){this.data.config={},this.data.allGroups=null,this.data.allCompositionIssueLinks=null,this.data.allParentIssueFields=null},this.indexById=function(e,t){var n=-1;return t.forEach(function(t,r){if(e==t.id){n=r;return}}),n}}]),configurationModule.service("dataService",["$q","applicationLoggingService","$http",function(e,t,n){var r=window.RA||window.AP,i="/rest/atlassian-connect/1/addons/timereports/properties/",s=e.defer(),o={};this.getProperty=function(t,n){var u=e.defer();return s.promise.then(function(){if(!o[t]){u.resolve(n||{});return}r.request({url:i+t,success:function(e){var t=TimesheetUtils.getJson(e),n=TimesheetUtils.getJson(t.value);u.resolve(n)},error:function(e){u.resolve(n||{})}})}),u.promise},this.setProperty=function(t,n){var s=e.defer();return r.request({url:i+t,type:"PUT",data:JSON.stringify(n),contentType:"application/json",success:function(e){var n=TimesheetUtils.getJson(e),r=TimesheetUtils.getJson(n.value);o[t]=!0,s.resolve(r)},error:function(e){s.reject(e)}}),s.promise},r.request({url:i,success:function(e){e=TimesheetUtils.getJson(e);for(var t=0;t<e.keys.length;t++){var n=e.keys[t];o[n.key]=!0}s.resolve()}})}]),define("app/modules/configuration",function(){});var directives=angular.module("directives",["talis.services.logging"]);directives.directive("context",["applicationLoggingService",function(e){return{restrict:"E",scope:{items:"="},link:function(t,n,r){e.trace("context",t.items);var i=TimesheetUtils.getJson(t.items);angular.extend(t.$parent,i)}}}]),directives.directive("autoFocus",["$timeout",function(e){return function(t,n,r){e(function(){n.focus().select()},0)}}]),directives.directive("formInvalid",[function(){return{restrict:"E",require:"^form",link:function(e,t,n,r){AP.require("dialog",function(t){var n=t.getButton("submit");e.$watch(r.$name+".$invalid",function(e){e?n.disable():n.enable()})})}}}]),directives.directive("formSubmit",[function(){return{restrict:"A",link:function(e,t,n){AP.require("dialog",function(e){var n=e.getButton("submit");n.bind(function(){n.disable(),t.submit()})})}}}]),directives.directive("timespent",[function(){return{require:"ngModel",link:function(e,t,n,r){r.$validators.timespent=function(e,t){if(!t||/^\d*\.?\d+$/.test(t))return!t||parseFloat(t)>0;var n=t.split(" "),r=["w","d","h","m"],i=n.length>0;for(var s=0;s<n.length&&i&&r.length>0;s++)do{var o=r.shift(),u=RegExp("^(\\d*\\.?\\d+)"+o+"$"),a=n[s].match(u);i=a!=null&&parseFloat(a[1])>0}while(r.length>0&&!i);return i}}}}]),define("app/modules/directives",function(){}),define("app/template/GadgetSummary",function(){}),TimesheetSelectOptions.prototype.addOption=function(e,t,n){var r=new this.optionClass(e,t);return n==1?this.options.unshift(r):this.options.push(r),this},TimesheetSelectOptions.prototype.findOption=function(e){for(var t=0;t<this.options.length;t++)if(this.options[t].isOption(e))return this.options[t];return null},TimesheetSelectOptions.prototype.sort=function(e){TimesheetUtils.sortByProperty(this.options,this.sortableProperty,e)},TimesheetGeneralOption.prototype.isOption=function(e){return this.id==e},define("app/template/TimesheetMenu",function(){}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("bower_components/stacktrace/stacktrace",t):e.printStackTrace=t()}(this,function(){function e(t){t=t||{guess:!0};var n=t.e||null,r=!!t.guess,i=t.mode||null,s=new e.implementation,o=s.run(n,i);return r?s.guessAnonymousFunctions(o):o}return e.implementation=function(){},e.implementation.prototype={run:function(e,t){return e=e||this.createException(),t=t||this.mode(e),t==="other"?this.other(arguments.callee):this[t](e)},createException:function(){try{this.undef()}catch(e){return e}},mode:function(e){return typeof window!="undefined"&&window.navigator.userAgent.indexOf("PhantomJS")>-1?"phantomjs":e.arguments&&e.stack?"chrome":e.stack&&e.sourceURL?"safari":e.stack&&e.number?"ie":e.stack&&e.fileName?"firefox":e.message&&e["opera#sourceloc"]?e.stacktrace?e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":e.message&&e.stack&&e.stacktrace?e.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":e.stack&&!e.fileName?"chrome":"other"},instrumentFunction:function(t,n,r){t=t||window;var i=t[n];t[n]=function(){return r.call(this,e().slice(4)),t[n]._instrumented.apply(this,arguments)},t[n]._instrumented=i},deinstrumentFunction:function(e,t){e[t].constructor===Function&&e[t]._instrumented&&e[t]._instrumented.constructor===Function&&(e[t]=e[t]._instrumented)},chrome:function(e){return(e.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(e){return e.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(e){return e.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(e){return e.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(e){var t="{anonymous}",n=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,r=e.stacktrace.split("\n"),i=[];for(var s=0,o=r.length;s<o;s+=2){var u=n.exec(r[s]);if(u){var a=u[4]+":"+u[1]+":"+u[2],f=u[3]||"global code";f=f.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,t),i.push(f+"@"+a+" -- "+r[s+1].replace(/^\s+/,""))}}return i},opera10b:function(e){var t=/^(.*)@(.+):(\d+)$/,n=e.stacktrace.split("\n"),r=[];for(var i=0,s=n.length;i<s;i++){var o=t.exec(n[i]);if(o){var u=o[1]?o[1]+"()":"global code";r.push(u+"@"+o[2]+":"+o[3])}}return r},opera10a:function(e){var t="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[];for(var s=0,o=r.length;s<o;s+=2){var u=n.exec(r[s]);if(u){var a=u[3]||t;i.push(a+"()@"+u[2]+":"+u[1]+" -- "+r[s+1].replace(/^\s+/,""))}}return i},opera9:function(e){var t="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[];for(var s=2,o=r.length;s<o;s+=2){var u=n.exec(r[s]);u&&i.push(t+"()@"+u[2]+":"+u[1]+" -- "+r[s+1].replace(/^\s+/,""))}return i},phantomjs:function(e){var t="{anonymous}",n=/(\S+) \((\S+)\)/i,r=e.stack.split("\n"),i=[];for(var s=1,o=r.length;s<o;s++){r[s]=r[s].replace(/^\s+at\s+/gm,"");var u=n.exec(r[s]);u?i.push(u[1]+"()@"+u[2]):i.push(t+"()@"+r[s])}return i},other:function(e){var t="{anonymous}",n=/function(?:\s+([\w$]+))?\s*\(/,r=[],i,s,o=10,u=Array.prototype.slice;while(e&&r.length<o){i=n.test(e.toString())?RegExp.$1||t:t;try{s=u.call(e.arguments||[])}catch(a){s=["Cannot access arguments: "+a]}r[r.length]=i+"("+this.stringifyArguments(s)+")";try{e=e.caller}catch(a){r[r.length]="Cannot access caller: "+a;break}}return r},stringifyArguments:function(e){var t=[],n=Array.prototype.slice;for(var r=0;r<e.length;++r){var i=e[r];i===undefined?t[r]="undefined":i===null?t[r]="null":i.constructor&&(i.constructor===Array?i.length<3?t[r]="["+this.stringifyArguments(i)+"]":t[r]="["+this.stringifyArguments(n.call(i,0,1))+"..."+this.stringifyArguments(n.call(i,-1))+"]":i.constructor===Object?t[r]="#object":i.constructor===Function?t[r]="#function":i.constructor===String?t[r]='"'+i+'"':i.constructor===Number?t[r]=i:t[r]="?")}return t.join(",")},sourceCache:{},ajax:function(e){var t=this.createXMLHTTPObject();if(t)try{return t.open("GET",e,!1),t.send(null),t.responseText}catch(n){}return""},createXMLHTTPObject:function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var n=0;n<t.length;n++)try{return e=t[n](),this.createXMLHTTPObject=t[n],e}catch(r){}},isSameDomain:function(e){return typeof location!="undefined"&&e.indexOf(location.hostname)!==-1},getSource:function(e){return e in this.sourceCache||(this.sourceCache[e]=this.ajax(e).split("\n")),this.sourceCache[e]},guessAnonymousFunctions:function(e){for(var t=0;t<e.length;++t){var n=/\{anonymous\}\(.*\)@(.*)/,r=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,i=e[t],s=n.exec(i);if(s){var o=r.exec(s[1]);if(o){var u=o[1],a=o[2],f=o[3]||0;if(u&&this.isSameDomain(u)&&a){var l=this.guessAnonymousFunction(u,a,f);e[t]=i.replace("{anonymous}",l)}}}}return e},guessAnonymousFunction:function(e,t,n){var r;try{r=this.findFunctionName(this.getSource(e),t)}catch(i){r="getSource failed with url: "+e+", exception: "+i.toString()}return r},findFunctionName:function(e,t){var n=/function\s+([^(]*?)\s*\(([^)]*)\)/,r=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s="",o,u=Math.min(t,20),a,f;for(var l=0;l<u;++l){o=e[t-l-1],f=o.indexOf("//"),f>=0&&(o=o.substr(0,f));if(o){s=o+s,a=r.exec(s);if(a&&a[1])return a[1];a=n.exec(s);if(a&&a[1])return a[1];a=i.exec(s);if(a&&a[1])return a[1]}}return"(?)"}},e}),define("app/modules/logging",["bower_components/stacktrace/stacktrace"],function(e){var t=angular.module("talis.services.logging",[]);t.factory("traceService",function(){return{print:e}}),t.provider("$exceptionHandler",{$get:["exceptionLoggingService",function(e){return e}]}),t.factory("exceptionLoggingService",["$log","$window","traceService","applicationLoggingService",function(e,t,n,r){function i(i,s){e.error.apply(e,arguments);try{var o=i.toString(),u=n.print({e:i});t.loggerUrl&&$.ajax({type:"POST",url:t.loggerUrl,headers:{Authorization:"JWT "+t.atlToken},contentType:"application/json",data:angular.toJson({url:t.location.href,message:o,type:"exception",stackTrace:u,tracelog:r.flush(),cause:decodeURIComponent(s||t.location.hash),deployedHash:t.deployedHash})});var a=t.$onErrorPopup;a&&(a.show(null,".section-header"),a.data("errorMessage",o).data("stackTrace",u))}catch(f){e.warn("Error server-side logging failed"),e.log(f)}}return i}]),t.factory("applicationLoggingService",["$log","$window",function(e,t){return{messages:[],trace:function(e,t){this.messages.push(e+" "+JSON.stringify(t))},flush:function(){return this.messages.splice(0,this.messages.length)},error:function(n,r){e.error.apply(e,arguments);try{t.loggerUrl&&$.ajax({type:"POST",url:t.loggerUrl,headers:{Authorization:"JWT "+t.atlToken},contentType:"application/json",data:angular.toJson({url:t.location.href,message:n,type:"error",tracelog:this.flush(),cause:decodeURIComponent(r||t.location.hash),deployedHash:t.deployedHash})})}catch(i){e.warn("Error server-side logging failed"),e.log(i)}},debug:function(t){e.log.apply(e,arguments)}}}])}),define("app/modules/appbase",["app/modules/logging"],function(e){var t=angular.module("appBase",["ngRoute","localization","talis.services.logging","configuration","directives"]);t.config(["$httpProvider","$provide",function(e,t){e.defaults.headers.common.Authorization="JWT "+window.atlToken,t.factory("authHttpInterceptor",["$injector","$q",function(t,n){return{response:function(n){var r=n.headers("X-acpt");return r&&(window.atlToken=r,e.defaults.headers.common.Authorization="JWT "+window.atlToken,t.get("authbeat").authbeat()),n},responseError:function(e){return e.status==401&&e.config.url!="/authbeat"&&e.config.url!="/bitbucket/login"&&window.AP.require("messages",function(e){e.error("Authentication expired","Reload page to restore communication with add-on backend")}),n.reject(e)}}}]),t.factory("urlRewriteHttpInterceptor",["$injector","$window",function(e,t){return{request:function(e){var n=e.url.match(/^\/?(.+?)\//);return t.i18nDefault&&n&&n[1]=="i18n"&&(e.url=t.i18nDefault),e}}}]),e.interceptors.push("authHttpInterceptor","urlRewriteHttpInterceptor")}]),t.run(["$rootScope","$window","$http","$injector","localize","applicationLoggingService",function(e,t,n,r,i,s){s.flush(),e.deployedDate=t.deployedDate,i.initLocalizedResources(),e.initOnErrorPopup=function(e){var n=r.get("configurationService");n.getConfiguration().then(function(r){s.trace("mailer url, ignore?",[t.mailerUrl,r.onErrorIgnore.val]),t.mailerUrl&&!r.onErrorIgnore.val&&(t.$onErrorPopup=e.dialog,e.scope.onErrorDialog=function(){$onErrorPopup.hide(),TimesheetUtils.setDynamicParams({errorMessage:$onErrorPopup.data("errorMessage"),stackTrace:$onErrorPopup.data("stackTrace")}),AP.require("dialog",function(e){e.create({key:"bitbucket",width:"700px",height:"260px",chrome:!0,header:"Report Problem",submitText:"Submit"})})},e.scope.onErrorIgnore=function(){r.onErrorIgnore.val=!0,n.saveConfiguration(r.onErrorIgnore).then(function(){t.$onErrorPopup.hide(),delete t.$onErrorPopup})})})}}]),t.service("authbeat",["$timeout","$http",function(e,t){this.authbeatPromise=null,this.authbeat=function(){e.cancel(this.authbeatPromise),this.authbeatPromise=e(function(){t.get("/authbeat")},84e4,!1)}}]),t.factory("projectKey",["$q",function(e){var t=e.defer();return window.AP.getLocation(function(e){var n=e.split("project.key=")[1];n&&(n=n.split("&")[0]),t.resolve(n)}),t.promise}]),t.factory("loggedInUser",["$q","pivottableService",function(e,t){var n=e.defer();return window.AP.getUser(function(e){var r="/rest/api/2/user?expand=groups&key="+encodeURIComponent(e.key);window.AP.request({url:r,dataType:"json",success:function(t){var r=TimesheetUtils.getJson(t);e.emailAddress=r.emailAddress,e.groups=r.groups.items,n.resolve(e)},error:function(){var e=Array.prototype.slice.call(arguments);e.push(r,n),t.onError.apply(t,e)}})}),n.promise}]),t.service("apService",["$q",function(e){}])}),define("app/timesheetApp",["app/modules/appbase"],function(){var e=angular.module("timesheetApp",["appBase"]);return e.config(["$routeProvider","$windowProvider",function(e,t){var n=t.$get();e.when("/",{controller:n.mainController||"TimesheetController",templateUrl:n.mainTemplate||"/templates/main.html",resolve:{loggedInUser:["loggedInUser",function(e){return e}],projectKey:["projectKey",function(e){return e}]}}).otherwise({redirectTo:"/"})}]),e}),define("app/controllers/gadgetController",["app/timesheetApp"],function(e){e.controller("GadgetController",["$scope","$rootScope","$route","$routeParams","$q","$location","$sce","$timeout","localize","loggedInUser","pivottableService",function(e,t,n,r,i,s,o,u,a,f,l){function h(){c.resize(),e.contentTemplate=function(){return e.templates.dialog};var n=function(){return TimesheetUtils.normalizeObject({pivotTableType:e.$parent.pivotTableType,group:e.$parent.group,user:e.$parent.user,sumSubTasks:e.$parent.sumSubTasks,filterOrProjectId:e.$parent.filterOrProjectId,groupByField:e.$parent.groupByField,numOfWeeks:e.$parent.numOfWeeks},!0)};e.pivotTableTypeChanged=function(){e.$parent.pivotTableType=e.$parent.pivotTableTypeOptions.selected?e.$parent.pivotTableTypeOptions.selected:""},e.filterByChanged=function(t){e.$parent.filterOrProjectId=t!=null&&t!=""?t.split(","):[]},e.groupChange=function(t){e.$parent.group=t!=null&&t!=""?t.split(","):[]},e.userChange=function(t){e.$parent.user=t},e.sumSubTasksChange=function(t){e.$parent.sumSubTasks=t},e.groupByChanged=function(){e.$parent.groupByField=e.$parent.groupByOptions.selected?e.$parent.groupByOptions.selected:""},e.numOfWeeksChange=function(t){e.$parent.numOfWeeks=t||1},l.getGadgetConfiguration(e.$parent.dashboardId,e.$parent.dashboardItemId).then(function(t){var n=Object.keys(t);if(t!=null&&n.length>0)for(var r=0;r<n.length;r++)e.$parent[n[r]]=t[n[r]]}),e.saveGadgetConfig=function(){var r=n();l.saveGadgetConfiguration(e.dashboardId,e.dashboardItemId,r).then(t.$emit("gadgetConfigSave"))},e.cancelGadgetConfigSaving=function(){t.$emit("gadgetConfigCancel")}}var c=window.RA||window.AP;h()}])}),define("app/controllers/bitbucketController",["app/timesheetApp"],function(e){e.controller("BitbucketController",["$scope","$http","$window","loggedInUser",function(e,t,n,r){function s(){i.resize(),e.replyTo=r.fullName+" <"+r.emailAddress+">";var s={submit:function(){e.$apply(function(){e.loading=!0}),t.post(n.mailerUrl,{replyTo:e.replyTo,title:e.title,content:e.content}).then(function(e){i.Dialog.close("submit")})},cancel:function(){i.Dialog.close("cancel")}};TimesheetUtils.getDynamicParams(function(t){e.title=t.errorMessage;if(t.stackTrace){var n=["","","---- Error Stack Trace ----"];n.push.apply(n,t.stackTrace),e.content=n.join("\n")}e.$apply()}),i.require("dialog",function(e){e.getButton("submit").bind(s.submit),e.getButton("cancel").bind(s.cancel)})}var i=window.RA||window.AP;s()}])}),define("app/controllers/timesheetController",["app/timesheetApp","moment"],function(e,t){e.controller("TimesheetController",["$window","$scope","$rootScope","localize","$timeout","$q","$route","$routeParams","$location","$sce","pivottableService","configurationService","loggedInUser","projectKey","applicationLoggingService",function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function w(e){v.trace("init routeParams",e),AP.resize(),AJS.$(".aui-inline-dialog").hide(),n.TimesheetUtils=TimesheetUtils,n.showGadgetConfiguration=!1,n.pivotTableType=e.pivotTableType||"Timesheet",n.pivotTableType=="PlannedVsActualTime"&&(n.pivotTableType="TimeTracking"),n.contentTemplate=function(){return n.pivotTableType=="Timesheet"?n.templates.timesheet:n.pivotTableType=="PieChart"?n.templates.piechart:n.pivotTableType=="TimeEntry"?"/templates/timeentry.html":n.templates.pivottable};var s=function(e){e=="submit"&&n.refresh()};n.isGadget&&AP.require("jira",function(e){var t=i.getLocalizedString(n.pivotTableType);e.setDashboardItemTitle(t),e.DashboardItem.onDashboardItemEdit(function(){n.showGadgetConfiguration=!0,n.$apply()})});var a=function(){var e=new Date,t=this.worklog.date;t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),TimesheetUtils.setDynamicParams({issueKey:this.worklog.issueKey,date:t}),AP.require("dialog",function(e){e.create({key:"createworklog",width:"700px",height:"400px",chrome:!0,header:"Log Work",submitText:"Log"}).on("close",s),e.getButton("submit").disable()})},m=function(){var e=this,t=e.worklog;e.loading=!0;var r=TimesheetUtils.getCurrentTimeMs()-TimesheetUtils.getTimeSpentMs(t.timeSpent,n.jiraConfig);t.date=new Date(t.date.getTime()+Math.max(0,r)),c.createWorklog(t).then(function(e){n.refresh()},function(){e.loading=!1})};r.$on("gadgetConfigSave",function(){n.showGadgetConfiguration=!1,n.refresh()}),r.$on("gadgetConfigCancel",function(){n.showGadgetConfiguration=!1}),n.addWorklogPopup={worklog:{estimateType:"auto"},init:function(e,t){this.worklog.timeSpent=n.jiraConfig.workingHoursPerDay+"h",this.worklog.comment="",this.worklog.date=new Date(e),this.worklog.issueKey=t},addWorklog:m,openMoreOptionDialog:a},n.editWorklogPopup={worklog:{estimateType:"auto"},worklogs:[],init:function(e,t,r){this.worklogs=[],this.worklog.timeSpent=n.jiraConfig.workingHoursPerDay+"h",this.worklog.comment="",this.worklog.date=new Date(e),this.worklog.issueKey=t;for(var i=0;i<r.length;i++)TimesheetUtils.sameDay(this.worklog.date,new Date(r[i].columnKey.keyValue))&&this.worklogs.push(r[i].worklog)},openDeleteWorklogDialog:function(e){TimesheetUtils.setDynamicParams({issueKey:this.worklog.issueKey,worklogId:e}),AP.require("dialog",function(e){e.create({key:"deleteworklog",width:"700px",height:"250px",chrome:!0,header:"Delete Worklog",submitText:"Delete"}).on("close",s),e.getButton("submit").disable()})},openEditWorklogDialog:function(e){TimesheetUtils.setDynamicParams({issueKey:this.worklog.issueKey,worklogId:e}),AP.require("dialog",function(e){e.create({key:"updateworklog",width:"700px",height:"400px",chrome:!0,header:"Log Work",submitText:"Log"}).on("close",s),e.getButton("submit").disable()})},openMoreOptionDialog:a,addWorklog:m},n.addWorklogDialog=function(){TimesheetUtils.setDynamicParams({date:new Date}),AP.require("dialog",function(e){e.create({key:"addworklog",width:"700px",height:"400px",chrome:!0,header:"Log Work",submitText:"Log"}).on("close",s)})},n.isMonthView=e.view==="month",n.sum=e.sum||(n.isMonthView?"week":"day"),n.compressed=e.showDetails==0||e.showDetails=="false",n.startDate=e.startDate?t(e.startDate).toDate():undefined,n.endDate=e.endDate?t(e.endDate).toDate():undefined;var g=e.view=="month",b=TimesheetUtils.getLastMondayDate(),w=TimesheetUtils.getFirstDayOfTheMonth();e.startDate===undefined&&(n.startDate=g?w:b);if(e.endDate===undefined){var E=n.startDate||b;n.endDate=g?TimesheetUtils.getLastDayOfTheMonth(E):TimesheetUtils.addDays(E,6)}n.projectKey=d,n.sumSubTasks=e.sumSubTasks==1||e.sumSubTasks=="true",n.filterOrProjectId=e.filterOrProjectId||(d?"project_"+d:undefined),n.numOfWeeks=e.numOfWeeks||1;if(n.pivotTableType=="TimeTracking")n.hideTotalColumn=!0,n.hideDetails=e.groupByField==undefined||e.groupByField=="workeduser",n.hideDetails&&(n.compressed=!0),n.hidePrevNext=!0;else{n.group=e.group,v.trace("$scope.group",[n.group,e.group]);if(n.pivotTableType=="IssueWorkedTimeByUser"||n.pivotTableType=="IssueWorkedTimeByStatus"||n.pivotTableType=="PieChart")n.hidePrevNext=e.startDate===null&&e.endDate===null;if(n.pivotTableType=="Timesheet"||n.pivotTableType=="PieChart")n.user=decodeURIComponent(e.user||"")||p.key,n.pivotTableType=="Timesheet"&&!e.group&&n.user==p.key&&!e.groupByField&&(c.havePermission("WORK_ON_ISSUES").then(function(e){n.editWorklogPopup.canLogWork=n.canLogWork=e}),c.havePermission("EDIT_OWN_WORKLOGS").then(function(e){n.editWorklogPopup.canEditOwnWorklog=n.canEditOwnWorklog=e}),c.havePermission("DELETE_OWN_WORKLOGS").then(function(e){n.editWorklogPopup.canDeleteOwnWorklog=n.canDeleteOwnWorklog=e}));n.pivotTableType=="PieChart"&&(n.hideDetails=!0)}n.changeWeek=function(t){v.trace("changeWeek",e);var r=TimesheetUtils.changeDate(n.startDate,t,n.pivotTableType!="Timesheet",n.isMonthView);r!=null&&(e.startDate=r);var i=TimesheetUtils.changeDate(n.endDate,t,!0,n.isMonthView);i!=null&&(e.endDate=i),y(e),f.search(e)},n.showPrevToday=function(){return n.startDate&&S(n.startDate,new Date)},n.showNextToday=function(){return n.startDate&&S(new Date,n.startDate)};var S=function(e,r){return!t().isBetween(n.startDate,n.endDate)&&e.getTime()>r.getTime()};n.moveToday=function(){v.trace("moveToday",e),delete e.startDate,delete e.endDate,y(e),f.search(e)},n.toggleMonthView=function(){v.trace("toggleMonthView",e);if(n.isMonthView)delete e.view,delete e.endDate;else{var t=TimesheetUtils.getFirstDayOfTheMonth(n.startDate||n.endDate),r=TimesheetUtils.getLastDayOfTheMonth(n.startDate||n.endDate);e.startDate=TimesheetUtils.formatDateForSearch(t),e.endDate=TimesheetUtils.formatDateForSearch(r),e.view="month"}y(e),f.search(e)},n.toggleShowDetails=function(){v.trace("toggleShowDetails",e),n.compressed?delete e.showDetails:e.showDetails=!1,y(e),f.search(e)},n.groupByChanged=function(){v.trace("groupByChanged",e),n.groupByOptions.selected?e.groupByField=n.groupByOptions.selected:delete e.groupByField,y(e),f.search(e)},n.filterByChanged=function(t){v.trace("filterByChanged",e),t!=null&&t!=""?e.filterOrProjectId=t.split(","):delete e.filterOrProjectId,y(e),f.search(e),n.$apply()},n.pivotTableTypeChanged=function(){v.trace("pivotTableTypeChanged",e),n.pivotTableTypeOptions.selected?e.pivotTableType=n.pivotTableTypeOptions.selected:delete e.pivotTableType,y(e),f.search(e)},n.groupChange=function(t){v.trace("groupChange",[e,t,t.split(",")]),t!=null&&t!=""?(e.group=t.split(","),v.trace("groupChange",e.group)):delete e.group,y(e),f.search(e),n.$apply()},n.startChangeDate=function(e){x("startDate",e)},n.endChangeDate=function(e){x("endDate",e)};var x=function(t,r){v.trace("changeDate",e),r!=null&&r!=""?e[t]=r:delete e[t],y(e),f.search(e),n.$apply()};n.userChange=function(t){v.trace("userChange",e),e.user=encodeURIComponent(t||""),y(e),f.search(e),n.$apply()},n.sumSubTasksChange=function(t){v.trace("sumSubTasksChange",e),t?e.sumSubTasks=!0:delete e.sumSubTasks,y(e),f.search(e)},n.refresh=function(){c.resetState(),h.resetState(),u.reload()},n.removeMenuOption=function(t,n){v.trace("removeMenuOption",e);var r=e[t];angular.isArray(r)&&r.length>1?r.splice(r.indexOf(n),1):delete e[t],y(e),f.search(e)},n.getSelectedOptionLabels=function(){var r=[],i=Object.keys(e),s=function(e,i){var s="param."+e;if("filterOrProjectId"==e){var o=n.filterByOptions.findOption(i);o!=null&&(i=o.label,o.id.indexOf("project_")==0&&(s+=".project"),o.id.indexOf("filter_")==0&&(s+=".filter"))}else if("groupByField"==e){var o=n.groupByOptions.findOption(i);o!=null&&(i=o.label)}else if("user"==e)n.paramUserInfo!=null&&(i=n.paramUserInfo.displayName);else if("startDate"==e||"endDate"==e)i=t(i).format("YYYY-MM-DD");r.push({label:s,labelParam:i,key:e})};for(var o=0;o<i.length;o++){var u=i[o];if(["user","startDate","endDate","groupByField","filterOrProjectId","group"].indexOf(u)==-1)continue;if("user"==u&&["Timesheet","PieChart"].indexOf(n.pivotTableType)==-1)continue;if(n.pivotTableType=="TimeTracking"&&["group","startDate","endDate"].indexOf(u)!=-1)continue;if(n.pivotTableType=="TimeTracking"&&"groupByField"==u&&e[u]=="workeduser")continue;if(e["group"]!=null&&u=="user")continue;var a=e[u];if(angular.isArray(a))for(var f=0;f<a.length;f++)s(u,a[f]);else a!==null&&s(u,a)}return!e.user&&!e.group&&n.pivotTableType=="Timesheet"&&s("user",n.user),!e.filterOrProjectId&&n.projectKey&&s("filterOrProjectId","project_"+n.projectKey),e.startDate===undefined?s("startDate",n.startDate):e.startDate===null&&s("startDate",t("1970-01-01")),e.endDate===undefined?s("endDate",n.endDate):e.endDate===null&&s("endDate",t("2099-12-31")),r};var T=function(){var e="";return n.license=="expired"?e='<span class="red">LICENSE EXPIRED</span>':n.license=="none"?e='<span class="red">NO LICENSE</span>':n.license!="active"&&(e='<span class="red">LICENSE ERROR</span>'),{isActive:n.license=="active",message:l.trustAsHtml(e)}};n.licenseManager=T(),c.isAdministrator().then(function(e){n.isAdmin=e});var N={pivotTableType:n.pivotTableType,groupByField:e.groupByField,monthView:n.isMonthView,startDate:n.startDate,endDate:n.endDate,filterOrProjectId:n.filterOrProjectId,projectKey:n.projectKey,user:n.user,groups:n.group,sumSubTasks:n.sumSubTasks,sum:n.sum};v.trace("option.groups",[N.groups,n.group]),n.loading=!0;var C=c.getUserInfo(n.user).then(function(e){return e&&(n.paramUserInfo=e),e});c.restrictedByAuditorsGroups(p).then(function(e){var t=n.pivotTableType=="Timesheet"&&(!N.user||N.user!=p.key);t=t||n.pivotTableType=="IssueWorkedTimeByUser",t&&e?(n.loading=!1,n.restrictionError={msgKey:"error.restriction.auditorsGroups"}):o.all([C,h.getConfiguration()]).then(function(e){var t=e[0],r=e[1];N.username=t?t.name:"",N.configOptions={},r.compositionIssueLink.val!=null&&(N.configOptions.compositionIssueLink=r.compositionIssueLink.val),r.parentIssueField.val!=null&&(N.configOptions.parentIssueField=r.parentIssueField.val),N.pivotTableType=="TimeTracking"&&N.groupByField=="workeduser"&&(N.groupByField=""),N.groups!=null&&N.groups!=""&&(N.username="",N.user=""),n.configOptions=N.configOptions}).then(function(){c.getPivotTable(p,N).then(function(e){n.loading=!1,n.pivotTable=e,n.rowKeySize=TimesheetUtils.colspan(e),AP.resize()})})});var k={id:"workeduser",name:"Worked User",custom:!0,schema:{},clauseNames:[]},L={id:"parent",name:"Parent Issue",custom:!0,schema:{},clauseNames:[]},A=c.getFields().then(function(t){n.groupByOptions=new TimesheetSelectOptions(TimesheetGeneralOption,e.groupByField);var r=TimesheetUtils.filterFields(t);n.pivotTableType!="TimeTracking"&&r.push(k),r.push(L);for(var i=0;i<r.length;i++){var s=r[i];n.groupByOptions.addOption(s.name,s.id)}n.groupByOptions.sort(),n.groupByOptions.addOption("No grouping","",!0)}),O=o.all([c.getFilters(),c.getProjects()]).then(function(t){var r=t[0],i=t[1];n.filterByOptions=new TimesheetSelectOptions(TimesheetGeneralOption,e.filterOrProjectId);for(var s=0;s<r.length;s++)n.filterByOptions.addOption(r[s].name,"filter_"+r[s].id);for(var s=0;s<i.length;s++)n.filterByOptions.addOption(i[s].name,"project_"+i[s].key)});o.all([A,O,C]).then(function(){n.gadgetSummary=(new GadgetSummary(n.getSelectedOptionLabels(),n.paramUserInfo)).getSummaryItems(),n.selectedOptionLabels=n.getSelectedOptionLabels()}),n.pivotTableTypeOptions=new TimesheetSelectOptions(TimesheetGeneralOption,n.pivotTableType);var M=Object.keys(PivotTableType);for(var _=0;_<M.length;_++)n.pivotTableTypeOptions.addOption(i.getLocalizedString(M[_]),M[_]);n.jiraConfig={workingHoursPerDay:8,workingDaysPerWeek:5,defaultUnit:"minute"},n.$watch("isAdmin",function(e){e&&c.getJiraConfiguration().then(function(e){if(!e.timeTrackingConfiguration){AP.require("messages",function(e){e.error("Time Tracking is currently OFF","Please enable Time Tracking in Administration - Issues - Time Tracking")});return}e.timeTrackingConfiguration.workingHoursPerDay&&(n.jiraConfig.workingHoursPerDay=e.timeTrackingConfiguration.workingHoursPerDay),e.timeTrackingConfiguration.workingDaysPerWeek&&(n.jiraConfig.workingDaysPerWeek=e.timeTrackingConfiguration.workingDaysPerWeek),e.timeTrackingConfiguration.defaultUnit&&(n.jiraConfig.defaultUnit=e.timeTrackingConfiguration.defaultUnit)})});var D=function(){var e=function(e,t){n.sumTitle=t,n.sumClass=e};n.sum=="month"?e("day","Show daily worked hours"):n.sum=="week"?e("month","Sum worked hours by month"):e("week","Sum worked hours by week")};n.weekSumChange=function(){v.trace("wekSumChange",e),e.sum=n.sum=="week"?"month":n.sum=="month"?"day":"week",y(e),f.search(e)},D()}var m=n.dashboardId?"-"+n.dashboardId+"-"+n.dashboardItemId:"",g="timereports-location-search"+m,y=function(e){AP.require("cookie",function(t){angular.isFunction(t.save)&&(delete e._,v.trace("saveRouteParams",e),t.save(g,JSON.stringify(e)),e._=Date.now())})},b=o.defer();AP.require("cookie",function(e){angular.isFunction(e.read)?e.read(g,function(e){var t=TimesheetUtils.getJson(e||"");v.trace("savedParams",t),angular.extend(t,a),b.resolve(t)}):b.resolve(a)}),b.promise.then(function(e){n.isGadget?c.getGadgetConfiguration(n.dashboardId,n.dashboardItemId).then(function(t){return v.trace("gadget config",t),angular.extend(e,t)}).then(w):w(e)})}])}),define("app/controllers/configurationController",["app/timesheetApp"],function(e){e.controller("ConfigurationController",["$scope","$route","$routeParams","$location","$q","$sce","$timeout","$window","configurationService","loggedInUser",function(e,t,n,r,i,s,o,u,a,f){function c(t){e[t]=!0,o(function(){e[t]=!1},2e3)}function h(){l.resize(),e.contentTemplate=function(){return e.templates.configure},e.saveAuditorsGroups=function(){a.saveConfiguration(e.auditorsGroups).then(function(t){e.auditorsGroups=t,c("auditorsGroupsSaveSuccess")})},e.saveCompositionIssueLink=function(){a.saveConfiguration(e.compositionIssueLink).then(function(t){e.compositionIssueLink=t,c("compositionIssueLinkSaveSuccess")})},e.saveParentIssueField=function(){a.saveConfiguration(e.parentIssueField).then(function(t){e.parentIssueField=t,c("parentIssueFieldSaveSuccess")})},e.saveOnErrorIgnore=function(){a.saveConfiguration(e.onErrorIgnore).then(function(t){e.onErrorIgnore=t,c("onErrorIgnoreSaveSuccess")})};var t=a.getConfiguration(),n=a.getGroups(),r=a.getAllCompositionIssueLinks(),s=a.getAllParentIssueFields();i.all([t,n,r,s]).then(function(t){l.resize();var n=t[0],r=t[1],i=t[2],s=t[3],o=function(e){e.val==null&&(e.val="")};e.auditorsGroups=n.auditorsGroups,e.compositionIssueLink=n.compositionIssueLink,o(e.compositionIssueLink),e.parentIssueField=n.parentIssueField,o(e.parentIssueField),e.onErrorIgnore=n.onErrorIgnore,e.allGroups=TimesheetUtils.makeUISelectList(r,!1),e.allCompositionIssueLinks=TimesheetUtils.makeUISelectList(i,!0);if(s!=null&&s.length>0){e.allParentIssueFields=[{id:"",label:""}];for(var a=0;a<s.length;a++)e.allParentIssueFields.push({id:s[a].id,label:s[a].name})}e.problemReporter=u.mailerUrl!=undefined})}var l=window.RA||window.AP;h()}])}),define("app/controllers/worklogController",["app/timesheetApp","moment"],function(e,t){e.controller("WorklogController",["$scope","$route","$routeParams","$location","$sce","$timeout","loggedInUser","pivottableService","applicationLoggingService",function(e,n,r,i,s,o,u,a,f){function c(){l.resize();var n=function(){var n=t();return e.worklogDatetime.date!=null?(n=t(e.worklogDatetime.date).startOf("day"),e.worklogDatetime.time!=null&&(e.worklogDatetime.time.timePartsToMoment(),n.add(e.worklogDatetime.time.momentTime))):e.worklog.started!=null&&(n=t(e.worklog.started)),n.toDate()},r=function(e,n,r){var i=t(TimesheetUtils.convertDate(n,r));e.date=i.toDate(),e.time.momentTime=i,e.time.momentToTimeParts()},i=function(){e.$apply(function(){e.loading=!0}),a.deleteWorklog(e.worklog).then(TimesheetUtils.closeDialogFunctions.submit)},s=function(){e.$apply(function(){e.loading=!0}),e.worklog.started=TimesheetUtils.formatDate(n()),a.updateWorklog(e.worklog).then(TimesheetUtils.closeDialogFunctions.submit)},o=function(){e.$apply(function(){e.loading=!0}),e.worklog.date=n(),a.createWorklog(e.worklog).then(TimesheetUtils.closeDialogFunctions.submit)},u=function(e){switch(e){case"delete":return i;case"update":return s;case"create":case"add":return o;default:throw new Error("Unsupported dialogType: "+e)}};e.contentTemplate=function(){return e.templates.dialog},e.worklog={estimateType:"auto",estimateValue:""},e.$watch("worklog.estimateType",function(t){e.worklog.estimateValue="",e.worklog.adjustmentAmount=""}),e.worklogDatetime={date:"",time:{momentTime:null,timeParts:[],momentToTimeParts:function(){if(this.momentTime==null)return;var e=/^(.*?)(\d+):(\d+)(.*?)$/.exec(this.momentTime.format("LT")),t=[],n=e[1]==""&&e[4]=="";e[1]!=""&&t.push({value:e[1],step:12}),t.push({value:e[2],step:1,min:n?0:1,max:n?23:12,suffix:":"}),t.push({value:e[3],step:5,min:0,max:59}),e[4]!=""&&t.push({value:e[4],step:12}),this.timeParts=t},timePartsToMoment:function(){if(this.timeParts!=null){var e="";for(var n=0;n<this.timeParts.length;n++)e+=this.timeParts[n].value,this.timeParts[n].suffix!=null&&(e+=this.timeParts[n].suffix);this.momentTime=t(e,"LT")}}}},TimesheetUtils.getDynamicParams(function(t){if(t.worklogId!=null)a.getWorklog(t.issueKey,t.worklogId).then(function(n){n.issueKey=t.issueKey,angular.extend(e.worklog,n);var i=n.author?n.author.timeZone:null;r(e.worklogDatetime,n.started,i)});else{angular.extend(e.worklog,{timeSpent:"",comment:"",issueKey:t.issueKey});var n=TimesheetUtils.formatDate(t.date!=null?t.date:new Date);r(e.worklogDatetime,n,null),e.$apply()}}),l.require("dialog",function(t){var n=u(e.dialogType);t.getButton("submit").bind(n),t.getButton("cancel").bind(TimesheetUtils.closeDialogFunctions.cancel)})}var l=window.RA||window.AP;c()}])}),define("app/services/pivottableService",["app/timesheetApp"],function(e){e.service("pivottableService",["$q","applicationLoggingService","configurationService",function(e,t,n){var r=window.RA||window.AP,i="gadgetConfig";this.permissions=null,this.userGroups={},this.worklogAuthors=[],this.epicFields={},this.getPivotTable=function(t,n){n.groups&&n.groups.length>0&&(n.worklogAuthors=this.worklogAuthors);var r=PivotTableFactory.createPivotTable(n,this.allFields),i=e.defer();if(this.checkAndUpdateOptions(n)){r.queue={},r.queueToAdd=[],r.matches={};var s=this.getAndProcessIssues(r,0,n),o=this;s.then(function(t){var s=t[0],u=t[1];if(s.total>s.maxResults)for(var a=0;a<s.total/s.maxResults-1;a++){var f=o.getAndProcessIssues(r,s.maxResults*(a+1),n);u.push(f)}e.all(u).then(function(){angular.forEach(r.queueToAdd,function(e){o.addIssue(r,e)}),i.resolve(r)})})}else{for(var u in this.allIssues)var a=r.add(this.allIssues[u]);i.resolve(r)}return i.promise},this.getFields=function(){var n=this,i=e.defer();return n.allFields==null?r.request({url:"/rest/api/2/field",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),n.allFields=e,i.resolve(e)},error:t.error}):i.resolve(n.allFields),i.promise},this.getFilters=function(){var n=this,i=e.defer();return n.allFilters==null?r.request({url:"/rest/api/2/filter/favourite",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),n.allFilters=e,i.resolve(e)},error:t.error}):i.resolve(n.allFilters),i.promise},this.getProjects=function(){var n=this,i=e.defer();return n.allProjects==null?r.request({url:"/rest/api/2/project",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),n.allProjects=e,i.resolve(e)},error:t.error}):i.resolve(n.allProjects),i.promise},this.getJiraConfiguration=function(){var t=e.defer();return r.request({url:"/rest/api/2/configuration",dataType:"json",success:function(e){t.resolve(TimesheetUtils.getJson(e))},error:function(){t.resolve({})}}),t.promise},this.getUserInfo=function(t){var n=e.defer();return t?r.request({url:"/rest/api/2/user?key="+encodeURIComponent(t),dataType:"json",success:function(e){n.resolve(TimesheetUtils.getJson(e))},error:function(){n.resolve()}}):n.resolve(null),n.promise},this.getUserInfoByName=function(t){var n=e.defer(),i=this,s="/rest/api/2/user?expand=groups&username="+encodeURIComponent(t);return r.request({url:s,dataType:"json",success:function(e){var t=TimesheetUtils.getJson(e);n.resolve(t)},error:function(){var e=Array.prototype.slice.call(arguments);e.push(s,n),i.onError.apply(i,e)}}),n.promise},this.getIssues=function(t){var n=e.defer(),i="/rest/api/2/search?"+t;return r.request({url:i,dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),n.resolve(e)},error:function(){var e=Array.prototype.slice.call(arguments);e.push(i,n),pivottableService.onError.apply(pivottableService,e)}}),n.promise},this.getAndProcessIssues=function(n,r,i){var s=this,o=1e3,u=e.defer(),a=function(e){return'"'+e+'"'},f=function(e){var n=TimesheetUtils.getSearchQueryBuilder(e);e.startDate!=null&&e.startDate!=""&&n.addQuery("worklogDate",a(s.addDays(e.startDate,-1)),">="),e.endDate!=null&&e.endDate!=""&&n.addQuery("worklogDate",a(s.addDays(e.endDate,1)),"<=");var r=function(e){return e.replace('"',"\\u0022").replace("#","\\u0023").replace("$","\\u0024").replace("%","\\u0025").replace("*","\\u002a").replace("@","\\u0040").replace("^","\\u005e")};if(e.username){var i=r(e.username);n.addQuery("worklogAuthor",a(i))}if(e.groups&&e.groups.length>0){t.trace("prepareJqlBuilder",e.groups);var o=new TimesheetUtils.queryBuilder(" or ");for(var u=0;u<e.groups.length;u++)o.addQueryWithFunc("worklogAuthor",a(r(e.groups[u]))," in ","membersOf");n.addQueryBuilder(o)}return n},l=(new TimesheetUtils.queryBuilder).addQuery("fields","*all").addQuery("startAt",r).addQuery("expand","changelog").addQuery("maxResults",o),c=f(i),h=c.build();c.isEmpty()||l.addQuery("jql",encodeURIComponent(h));var p=l.build();return this.getIssues(p).then(function(t){var o=[];for(var a in t.issues){var f=t.issues[a],l=s.processIssue(n,f,i);l.hasOwnProperty("promise")&&o.push(l.promise)}r?e.all(o).then(u.resolve):u.resolve([t,o])},u.reject),u.promise},this.processIssue=function(t,n,r){var i=this;if(!r.sumSubTasks){var s=[];if(r.groupByField=="parent"){var o=this.getParentIssue(t,n,r);if(o.hasOwnProperty("promise")){var u=e.defer();s.push(u.promise),i.resolveParent(t,n,u,r,o)}else n.fields.parent=n}else if(r.groupByField&&this.isEpicField(r.groupByField)){var a=this.getEpic(t,n);a&&(s.push(a),a.then(function(e){n.fields[r.groupByField]=e.fields[r.groupByField]}))}var f=this.loadAllWorklogs(n);f.hasOwnProperty("promise")&&s.push(f.promise);if(s.length>0){t.queueToAdd.push(n);var u=e.defer();return e.all(s).then(u.resolve),u}return i.addIssue(t,n),f}var f=this.getParentIssue(t,n,r),u=e.defer();if(f.hasOwnProperty("promise"))this.loadAllWorklogs(n,e.defer()).promise.then(function(e){i.addWorklogsToParent(t,e,u,r,f)});else if(!t.queue.hasOwnProperty(n.key))t.queue[n.key]=u,i.loadAllWorklogs(n,u),t.matches[n.key]=u,u.promise.then(function(e){t.queueToAdd.push(e)});else{t.queue[n.key].resolve(n);var l=t.matches[n.key];l?(l.resolve(!0),l.promise.then(u.resolve,u.reject)):(t.matches[n.key]=u,t.queue[n.key].promise.then(function(e){i.loadAllWorklogs(e,u)}),u.promise.then(function(e){t.queueToAdd.push(e)}))}return u},this.addIssue=function(e,t){this.allIssues.push(t);var n=e.add(t)},this.getParentIssue=function(e,t,n){var r=this.getParentIssueKey(t,n);return r?this.getParentIssueByKey(e,t,r):t},this.getParentIssueByKey=function(t,n,r){var i=this;if(t.queue.hasOwnProperty(r))return t.queue[r];var s=e.defer();return t.queue[r]=s,i.findIssueByKey(r).then(function(e){s.resolve(e)}),t.queue[r]},this.getParentIssueKey=function(e,t){var n=t.configOptions;return e.fields.parent?e.fields.parent.key:n&&n.parentIssueField&&e.fields[n.parentIssueField]?e.fields[n.parentIssueField]:n?this.getCompositionLinkKey(e,n):null},this.getCompositionLinkKey=function(e,t){var n=e.fields.issuelinks;if(n!=null&&n.length>0&&t.compositionIssueLink)for(var r=0;r<n.length;r++)if(n[r].outwardIssue&&n[r].type.name==t.compositionIssueLink)return n[r].outwardIssue.key;return null},this.resolveParent=function(e,t,n,r,i){this.onParentIssue(e,t,r,i,[],function(e){t.fields.parent=e?e:t,n.resolve()})},this.checkIfMatches=function(t,n){var r=e.defer(),i=TimesheetUtils.getSearchQueryBuilder(n);i.addQuery("key",t.key);var s=i.build(),o="jql="+encodeURIComponent(s);return this.getIssues(o).then(function(e){r.resolve(e.total>0)},r.reject),r},this.addOnceIfMatches=function(e,t,n,r){var i=this,s=e.matches[t.key];s?s.promise.then(n.resolve,n.reject):(s=e.matches[t.key]=this.checkIfMatches(t,r),s.promise.then(function(r){r?(i.loadAllWorklogs(t,n),n.promise.then(function(t){e.queueToAdd.push(t)})):n.resolve()},n.reject))},this.addWorklogsToParent=function(e,t,n,r,i){var s=this;this.onParentIssue(e,t,r,i,[],function(i){i?(s.addWorklogs(t,i),s.addOnceIfMatches(e,i,n,r)):(e.queueToAdd.push(t),n.resolve())})},this.onParentIssue=function(e,n,r,i,s,o){var u=this;i.promise.then(function(i){if(s.indexOf(i.key)>=0)t.debug("Cycle summing subtasks for issue "+n.key,s),o();else{s.push(i.key);var a=u.getParentIssue(e,i,r);a.hasOwnProperty("promise")?u.onParentIssue(e,n,r,a,s,o):o(i)}})},this.addWorklogs=function(e,t){var n=e.worklog||e.fields.worklog,r=t.worklog||t.fields.worklog,i={key:e.key,fields:{summary:e.fields.summary}};for(var s in n.worklogs)n.worklogs[s]._issue=i,r.worklogs.push(n.worklogs[s]);t.fields.timeoriginalestimate+=e.fields.timeoriginalestimate,t.fields.timeestimate=(e.fields.timeestimate||0)+(t.fields.timeestimate||0),t.fields.timeoriginalestimate=(e.fields.timeoriginalestimate||0)+(t.fields.timeoriginalestimate||0),t.fields.timespent=(e.fields.timespent||0)+(t.fields.timespent||0)},this.restrictedByAuditorsGroups=function(t){var r=e.defer();return n.getConfiguration().then(function(e){var n=e.auditorsGroups.val,i=n!=null;if(i)for(var s=0;s<t.groups.length;s++)if(n.indexOf(t.groups[s].name)>=0){i=!1;break}r.resolve(i)}),r.promise},this.getPermissions=function(){if(this.permissions==null){var t=e.defer();this.permissions=t.promise,r.request({url:"/rest/api/2/mypermissions",dataType:"json",success:function(e){e=TimesheetUtils.getJson(e),t.resolve(e.permissions)},error:function(){t.reject()}})}return this.permissions},this.havePermission=function(t){var n=e.defer();return this.getPermissions().then(function(e){n.resolve(e[t]!=null&&e[t].havePermission==1)},function(){n.reject()}),n.promise},this.isAdministrator=function(){return this.havePermission("ADMINISTER")},this.findIssueByKey=function(t){var n=e.defer();return r.request({url:"/rest/api/2/issue/"+t,dataType:"json",success:function(e){n.resolve(TimesheetUtils.getJson(e))},error:function(){n.reject()}}),n.promise},this.getIssueWorklogs=function(t){var n=e.defer();return r.request({url:"/rest/api/2/issue/"+t+"/worklog",dataType:"json",success:function(e){n.resolve(TimesheetUtils.getJson(e))},error:function(){n.reject()}}),n.promise},this.filterWorklogs=function(t,n){var r=[];if(this.groups){var i=t.worklog||t.fields.worklog;for(var s=0;s<i.worklogs.length;s++){var o=i.worklogs[s];if(o.author){var u=o.author.name;if(!this.userGroups.hasOwnProperty(u)){var a=this.userGroups[u]=this.getUserInfoByName(u);r.push(a);var f=this;a.then(function(e){for(var t=0;t<e.groups.items.length;t++)if(f.groups.indexOf(e.groups.items[t].name)>=0){f.worklogAuthors.push(e.name.toLowerCase());break}})}}}}return r.length==0&&!n?!1:(e.all(r).then(function(){n.resolve(t)}),!0)},this.loadAllWorklogs=function(t,n){var r=n||e.defer(),i=t.worklog||t.fields.worklog;if(i.total>i.maxResults){var s=this;this.getIssueWorklogs(t.key).then(function(e){angular.copy(e,i),s.filterWorklogs(t,r)})}else{var o=this.filterWorklogs(t,r);if(!o&&!n)return t;!o&&n&&n.resolve(t)}return r},this.isEpicField=function(e){if(!this.epicFields.hasOwnProperty(e)){for(var t=0;t<this.allFields.length;t++){var n=this.allFields[t];if(n.id==e)return this.epicFields[e]=n.custom&&n.schema!=null&&["com.pyxis.greenhopper.jira:gh-epic-color","com.pyxis.greenhopper.jira:gh-epic-status","com.pyxis.greenhopper.jira:gh-epic-label"].indexOf(n.schema.custom)>=0}this.epicFields[e]=!1}return this.epicFields[e]},this.getEpic=function(t,n){if(!this.hasOwnProperty("epicLinkField")){this.epicLinkField=null;for(var r=0;r<this.allFields.length;r++){var i=this.allFields[r];if(i.custom&&i.schema!=null&&i.schema.custom=="com.pyxis.greenhopper.jira:gh-epic-link"){this.epicLinkField=i;break}}}if(this.epicLinkField&&n.fields[this.epicLinkField.id])return this.getParentIssueByKey(t,n,n.fields[this.epicLinkField.id]).promise;if(this.epicLinkField&&n.fields.parent){var s=e.defer(),o=this;return this.getParentIssueByKey(t,n,n.fields.parent.key).promise.then(function(e){var n=o.getEpic(t,e);n?n.then(s.resolve):s.reject()}),s.promise}return null},this.onError=function(e,t,n,r,i){e.status==401?this.loginExpired():e.status==503?this.serviceUnavailable():e.status==403?this.forbidden():this.unexpectedError(e,n,r),i.reject()},this.loginExpired=function(){r.require("messages",function(e){e.error("JIRA session expired","Please login again to restore connection with JIRA")})},this.serviceUnavailable=function(){r.require("messages",function(e){e.error("JIRA Unavailable","The requested resource failed to load. If the problem persists, please contact Atlassian Cloud Support.")})},this.forbidden=function(){r.require("messages",function(e){e.error("Forbidden","You need to accept WRITE and DELETE scopes for the add-on in UPM")})},this.unexpectedError=function(e,n,i){var s="";if(e&&e.responseText)try{var o=TimesheetUtils.getJson(e.responseText);s=o.errorMessages.join(" "),o.status=e.status,t.error(o,i)}catch(u){function a(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}s=a(e.responseText),t.error(e.status+" "+s,i)}else s=n,t.error(n,i);r.require("messages",function(e){e.error("Unexpected error",s)})},this.getGadgetConfiguration=function(t,n){var s=e.defer();return r.request({url:"/rest/api/2/dashboard/"+t+"/items/"+n+"/properties",success:function(e){e=TimesheetUtils.getJson(e),e.keys.length>0?r.request({url:"/rest/api/2/dashboard/"+t+"/items/"+n+"/properties/"+i,success:function(e){e=TimesheetUtils.getJson(e),s.resolve(e.value)},error:function(e){s.resolve({})}}):s.resolve({})},error:function(e){s.resolve({})}}),s.promise},this.saveGadgetConfiguration=function(t,n,s){var o=e.defer();return r.request({url:"/rest/api/2/dashboard/"+t+"/items/"+n+"/properties/"+i,type:"PUT",contentType:"application/json",headers:{Accept:"application/json"},data:JSON.stringify(s),success:function(e){o.resolve(TimesheetUtils.getJson(e))},error:function(e){o.reject()}}),o.promise},this.createWorklog=function(t){var n=e.defer(),i=this,s=this.getEstimateParams(t,"reduceBy"),o="/rest/api/2/issue/"+t.issueKey+"/worklog"+s;return r.request({url:o,type:"POST",contentType:"application/json",headers:{Accept:"application/json"},data:i.getCreateWorklogRequest(t),success:function(e){n.resolve(TimesheetUtils.getJson(e))},error:function(){var e=Array.prototype.slice.call(arguments);e.push(o,n),i.onError.apply(i,e)}}),n.promise},this.getWorklog=function(t,n){var i=e.defer(),s=this,o="/rest/api/2/issue/"+t+"/worklog/"+n;return r.request({url:o,type:"GET",contentType:"application/json",headers:{Accept:"application/json"},success:function(e){i.resolve(TimesheetUtils.getJson(e))},error:function(){var e=Array.prototype.slice.call(arguments);e.push(o,i),s.onError.apply(s,e)}}),i.promise},this.updateWorklog=function(t){var n=e.defer(),i=this,s=this.getEstimateParams(t),o="/rest/api/2/issue/"+t.issueKey+"/worklog/"+t.id+s;return r.request({url:o,type:"PUT",contentType:"application/json",headers:{Accept:"application/json"},data:i.getUpdateWorklogRequest(t),success:function(e){n.resolve(TimesheetUtils.getJson(e))},error:function(){var e=Array.prototype.slice.call(arguments);e.push(o,n),i.onError.apply(i,e)}}),n.promise},this.deleteWorklog=function(t){var n=e.defer(),i=this,s=this.getEstimateParams(t,"increaseBy"),o="/rest/api/2/issue/"+t.issueKey+"/worklog/"+t.id+s;return r.request({url:o,type:"DELETE",contentType:"application/json",success:function(){n.resolve(!0)},error:function(e){var t=Array.prototype.slice.call(arguments);t.push(o,n),i.onError.apply(i,t)}}),n.promise},this.getEstimateParams=function(e,t){var n="?adjustEstimate="+e.estimateType;return e.estimateType=="new"?n+="&newEstimate="+encodeURIComponent(e.estimateValue):e.estimateType=="manual"&&(n+="&"+t+"="+encodeURIComponent(e.adjustmentAmount)),n},this.getCreateWorklogRequest=function(e){return JSON.stringify({comment:e.comment,started:TimesheetUtils.formatDate(e.date),timeSpent:e.timeSpent})},this.getUpdateWorklogRequest=function(e){return JSON.stringify({comment:e.comment,started:e.started,timeSpent:e.timeSpent})},this.resetState=function(){this.allIssues=null,this.allFilters=null,this.allProjects=null,this.allFields=null,this.filterOrProjectId=null,this.sumSubTasks=null,this.permissions=null},this.checkAndUpdateOptions=function(e){var t=this.allIssues==null||this.filterOrProjectId!=e.filterOrProjectId||this.sumSubTasks!=e.sumSubTasks||this.startDate!=e.startDate||this.endDate!=e.endDate||this.user!=e.user||this.groups!=e.groups;return t&&(this.allIssues=[],this.filterOrProjectId=e.filterOrProjectId,this.sumSubTasks=e.sumSubTasks,this.startDate=e.startDate,this.endDate=e.endDate,this.user=e.user,this.groups=e.groups,this.userGroups={},this.worklogAuthors.splice(0,this.worklogAuthors.length)),t},this.addDays=function(e,t){if(e==null||e=="")return e;var n=TimesheetUtils.addDays(moment(e).toDate(),t);return TimesheetUtils.formatDateForSearch(n)}}])});var DrawHelper={composeTooltip:function(e,t,n){return'<table cellspacing="2px" cellpadding="2px"><tr>'+this.prepareHtmlForIcons(n,e,"<br/>")+"<td>"+this.prepareLinkForItem(n,e)+"<br/>"+Math.round(t.percent)+"%"+"</td>"+"</tr>"+"</table>"},composeLegendTooltip:function(e,t,n,r){return"<table><tr>"+this.prepareHtmlForIcons(n,e,"")+"<td>"+this.prepareLinkForItem(n,e)+"&nbsp;("+this.getFormattedTime(t.data[0][1],r)+")"+"</td>"+"</tr>"+"</table>"},prepareHtmlForIcons:function(e,t,n){var r=this.getTooltipIcons(e,t),i="";if(r!=null&&r.length>0){var s=n==""?16*r.length:16;i+="<td style='width:"+s+"px; white-space: nowrap'>";for(var o=0;o<r.length;o++)o!=0&&(i+=n),i+='<img src="'+r[o].url+'" title="'+r[o].title+'" height="16"/>';i+="</td>"}return i},prepareLinkForItem:function(e,t){var n=this.getDataItemByLabel(e,t),r=this.getTooltipUrl(n);if(r){var i=this.getTooltipHint(n),s=this.getTitleWithResolution(n.link);return this.getMasterUrlHtml(n)+this.getLinkHtml(r,i,s,"")}return t},getTooltipIcons:function(e,t){var n=this.getDataItemByLabel(e,t);return n!=null?n.icons:null},getDataItemByLabel:function(e,t){for(var n=0;n<e.length;n++)if(e[n].label==t)return e[n];return null},getTooltipUrl:function(e){return e!=null&&e.link!=null?e.link.url:"#"},getTooltipHint:function(e){return e!=null&&e.link&&e.link.hint!=null?e.link.hint:""},getLinkHtml:function(e,t,n,r){return'<a title="'+t+'" href="'+e+'" style="'+r+'">'+n+"</a>"},getMasterUrlHtml:function(e){if(e!=null){var t=e.masterLink;if(t!=null){var n=this.getTitleWithResolution(t);return this.getLinkHtml(t.url,t.hint,n,"color:#666 !important")+" / "}}return""},getTitleWithResolution:function(e){return this.isResolvedIssue(e)?"<s>"+e.label+"</s>":e.label},getFormattedTime:function(e,t){return t.prettyDuration==1?this.prettyDuration(e,t):this.formatDecimal(this.calculateHours(e),t.decimalSeparator)+"h"},formatDecimal:function(e,t){var n=e.toString();return t!=null&&(n=n.replace(".",t)),n},isResolvedIssue:function(e){return e!=null&&e.resolution!=null},calculateHours:function(e){return Math.round(e/36)/100},prettyDuration:function(e,t){var n=parseInt(e)||0,r=60,i=60*r,s=parseInt(t.hoursPerDay)*i,o=parseInt(t.daysPerWeek)*s,u=30*s,a=12*u,f=[];if(n>=a){var l=Math.floor(n/a);f.push(l+"y"),n-=l*a}if(n>=u){var c=Math.floor(n/u);f.push(c+"m"),n-=c*u}if(n>=o){var h=Math.floor(n/o);f.push(h+"w"),n-=h*o}if(n>=s){var p=Math.floor(n/s);f.push(p+"d"),n-=p*s}if(n>=i){var d=Math.floor(n/i);f.push(d+"h"),n-=d*i}if(n>=r){var v=Math.floor(n/r);f.push(v+"m"),n-=v*r}return f.join(" ")},correctIfDate:function(e){return e.split(" 00:00:00 ")[0]}};define("app/directives/DrawHelper",function(){}),define("app/directives/timesheetDirectives",["app/timesheetApp"],function(e){e.directive("issueField",["$compile",function(e){return{restrict:"E",scope:{field:"="},link:function(t,n,r){var i=function(n){return n.hasOwnProperty("name")?n.name:n.hasOwnProperty("value")?n.value:n.hasOwnProperty("key")?(t.issueField=n,e('<issue-key issue="issueField" show-title="true"/>')(t)):n},s;/\/rest\/api(\/\d+)?\/user/.test(t.field.self)?s=e('<a ng-class="{inactive: !field.active}" ng-href="#/?user={{field.name}}" ng-bind="field.displayName || field.name"></a>')(t):TimesheetUtils.isDate(t.field)?s=e("<span>{{field | date:'yyyy-MM-dd'}}</span>")(t):Array.isArray(t.field)?(s="",t.field.forEach(function(e){s.length>0&&(s+=", "),s+=i(e)})):s=i(t.field),n.append(s)}}}]),e.directive("pivotCell",["$compile",function(e){return{restrict:"E",scope:{key:"=",columns:"="},link:function(t,n,r){var i=e('<span ng-bind="columns[key.keyValue] | prettyHours"/>');t.key.filterName?n.append(e('<span ng-bind-html="columns[key.keyValue] | '+t.key.filterName+'"/>')(t)):n.append(i(t))}}}]),e.directive("columnKey",["$compile",function(e){return{restrict:"A",scope:{columnKey:"="},link:function(t,n,r){t.columnKey.user?n.append(e('<a ng-class="{inactive: !columnKey.user.active}" ng-href="#/?user={{columnKey.user.name}}" ng-bind="columnKey.user.displayName || columnKey.user.name"></a>')(t)):t.columnKey.date?n.append(e("<span>{{columnKey.date | date:'EEE'}}<br/>{{columnKey.date | date:'dd/MMM'}}</span>")(t)):t.columnKey.weekNumber?(t.endDateIncluded=TimesheetUtils.addDays(t.columnKey.endDate,-1),n.append(e("<span title=\"{{columnKey.startDate | date:'d MMM'}}-{{endDateIncluded | date:'d MMM'}}\">Week<br/>{{columnKey.weekNumber | number}}</span>")(t))):t.columnKey.monthKey?n.append(e("<span title=\"{{columnKey.endDate | date:'1-d MMMM'}}\">{{columnKey.keyValue | date:'MMM'}}</span>")(t)):n.append(e("<span>{{columnKey.keyValue | i18n}}</span>")(t))}}}]),e.directive("issueType",["$compile",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent"><img width="16" height="16" title="{{issue.fields.issuetype.description}}" ng-src="{{issue.fields.issuetype.iconUrl}}" alt="{{issue.fields.issuetype.name}}" /></a>'}}]),e.directive("issueKey",["$compile",function(){return{restrict:"E",scope:{issue:"=",showTitle:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent" title="{{showTitle ? issue.fields.summary : \'\'}}"><s ng-show="issue.fields.resolution">{{issue.key}}</s><span ng-hide="issue.fields.resolution">{{issue.key}}</span></a>'}}]),e.directive("issueSummary",["$compile",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent">{{issue.fields.summary}}</a>'}}]),e.directive("issuePriority",["$compile",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent"><img width="16" height="16" ng-src="{{issue.fields.priority.iconUrl}}" alt="{{issue.fields.priority.name}}" /></a>'}}]),e.directive("auiSelect2",["$timeout",function(e){return{require:"ngModel",restrict:"A",link:function(t,n,r,i){e(function(){t.$watch(r.ngModel,function(){$(n).auiSelect2()})},0)}}}]),e.directive("auiDatePicker",[function(){return{restrict:"A",link:function(e,t,n){$(t).datePicker({overrideBrowserDefault:!0}),$(t).change(function(){n.ngDateChangedFunc!=null&&e[n.ngDateChangedFunc]($(t).val())})}}}]),e.directive("timePicker",["$compile",function(e){return{restrict:"E",scope:{time:"="},link:function(t,n,r){var i=function(e){return/^\d+$/.test(e)};t.timeClick=function(e,n){i(e.value)?n.shiftKey?(e.value=parseInt(e.value)-e.step,e.value<e.min&&(e.value=e.min)):(e.value=parseInt(e.value)+e.step,e.value>e.max&&(e.value=e.max)):(t.time.timePartsToMoment(),t.time.momentTime.set("hour",e.step+t.time.momentTime.get("hour")),t.time.momentToTimeParts())},t.timeChange=function(e){e.min!=null&&e.max!=null?i(e.value)?e.min!=null&&e.max!=null&&(e.value>e.max?e.value=e.max:e.value<e.min&&(e.value=e.min)):e.value=e.min:e.value=""},$(n).append(e('<input type="text" ng-repeat-start="item in time.timeParts" maxLength="5" class="text" style="max-width: 40px; margin: 0 1px;" ng-model="item.value" ng-click="timeClick(item, $event)" ng-change="timeChange(item)"><span ng-repeat-end ng-show="item.suffix">{{item.suffix}}</span>')(t))}}}]),e.directive("pivottableSlider",[function(){return{restrict:"E",scope:!1,templateUrl:"/templates/slider.html"}}]),e.directive("auiUserPicker",[function(){return{restrict:"A",link:function(e,t,n){$(t).auiSelect2({hasAvatar:!1,placeholder:"",multiple:!1,ajax:{url:"/rest/api/2/user/picker",type:"GET",dataType:"json",cache:!0,data:function(t){return{query:t,maxResults:1e3,showAvatar:!0}},results:function(t){return t=TimesheetUtils.getJson(t),{results:t.users}},transport:function(t){AP.request({url:t.url,headers:{Accept:"application/json"},data:t.data,success:t.success,error:t.error})}},id:function(t){return t.key},formatSelection:function(t){return Select2.util.escapeMarkup(t.displayName)},formatResult:function(t,n,r,i){var s=t.displayName+" - ("+t.name+")",o=[],u=function(t){return t};return Select2.util.markMatch(i(s),i(r.term),o,u),o.join("")},formatNoMatches:function(t){return"No matches found"}}),e.$watch(n.ngModel,function(e){e!=null&&$(t.select2("container")).find(".select2-chosen").html(e)}),$(t).change(function(){n.ngUserChangedFunc!=null&&e[n.ngUserChangedFunc]($(t).val())})}}}]),e.directive("selectedOption",[function(){return{restrict:"E",scope:{label:"=",labelParam:"=",removeAction:"&removeAction"},template:'<span id="closeable-label-nourl" class="aui-label aui-label-closeable">{{label | i18n:labelParam}}<span ng-click="removeAction()" tabindex="0" class="aui-icon aui-icon-close" original-title="(remove closableNoUrl)">(remove closableNoUrl)</span></span>'}}]),e.directive("auiGroupPicker",[function(){return{restrict:"A",link:function(e,t,n){$(t).auiSelect2({hasAvatar:!1,placeholder:" ",multiple:!0,ajax:{url:"/rest/api/2/groups/picker",type:"GET",dataType:"json",cache:!0,data:function(t){return{query:t,maxResults:1e3,showAvatar:!0}},results:function(t){return t=TimesheetUtils.getJson(t),{results:t.groups}},transport:function(t){AP.request({url:t.url,headers:{Accept:"application/json"},data:t.data,success:t.success,error:t.error})}},id:function(t){return t.name},formatSelection:function(t){return Select2.util.escapeMarkup(t.name)},formatResult:function(t,n,r,i){var s=t.name,o=[],u=function(t){return t};return Select2.util.markMatch(i(s),i(r.term),o,u),o.join("")},formatNoMatches:function(t){return"No matches found"}}),e.$watch(n.ngModel,function(e){if(e!=null&&e!=""){angular.isArray(e)||(e=e.split(","));var n=[];for(var r=0;r<e.length;r++)n.push({name:e[r],html:e[r]});$(t).auiSelect2("data",n)}}),$(t).change(function(){n.ngGroupChangedFunc!=null&&e[n.ngGroupChangedFunc]($(t).val())})}}}]),e.directive("auiIssuePicker",[function(){return{scope:{ngDisabled:"="},restrict:"A",link:function(e,t,n){if(e.ngDisabled)return;$(t).auiSelect2({placeholder:"",multiple:!1,ajax:{url:"/rest/api/2/issue/picker",type:"GET",dataType:"json",cache:!0,data:function(t){return{query:t,currentJQL:"",showSubTasks:!0}},results:function r(e){e=TimesheetUtils.getJson(e);var r=[];return e.sections.length>0&&(r.push({select2Section:e.sections[0].label,children:e.sections[0].issues}),e.sections.length>1&&r.push({select2Section:e.sections[1].label,children:e.sections[1].issues})),{results:r}},transport:function(t){AP.request({url:t.url,headers:{Accept:"application/json"},data:t.data,success:t.success,error:t.error})}},id:function(t){return t.key},formatSelection:function(t){return Select2.util.escapeMarkup(t.key+": "+t.summaryText)},formatResult:function(t,n,r,i){if(t.hasOwnProperty("select2Section"))return t.select2Section;var s=t.key+": "+t.summaryText,o=[],u=function(t){return t};return Select2.util.markMatch(i(s),i(r.term),o,u),o.join("")},formatNoMatches:function(t){return"No matches found"}})}}}]),e.directive("auiMultiSelectPicker",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.ngOptionsData,function(){e[n.ngOptionsData]!=null&&$(t).auiSelect2({hasAvatar:!1,placeholder:" ",multiple:!0,data:{results:e[n.ngOptionsData].options,text:"label"},id:function(t){return t.id},formatSelection:function(t){return Select2.util.escapeMarkup(t.label)},formatResult:function(t,n,r,i){var s=t.label,o=[],u=function(t){return t};return Select2.util.markMatch(i(s),i(r.term),o,u),o.join("")},formatNoMatches:function(t){return"No matches found"}})}),e.$watch(n.ngModel,function(r){if(r!=null){angular.isArray(r)||(r=r.split(","));var i=[];if(e[n.ngOptionsData]!=null)for(var s=0;s<r.length;s++){var o=e[n.ngOptionsData].findOption(r[s]);o!=null&&i.push({id:o.id,label:o.label})}$(t).auiSelect2("data",i)}}),$(t).change(function(){n.ngValueChangedFunc!=null&&e[n.ngValueChangedFunc]($(t).val())})}}}]),e.directive("pieChart",["pivottableService","$interpolate","$compile",function(e,t,n){return{restrict:"A",link:function(r,i,s){var o=null,u=$(i).height(),a=r.$parent.hostBaseUrl,f=function(e,t){if(t==null)return{label:DrawHelper.correctIfDate(e)};var n=t.fields.resolution;return n!=null&&(n={name:n.name,description:n.description}),{label:t.key,url:a+"/browse/"+t.key,hint:t.fields.summary,resolution:n}},l=function(t){if(t!=null){var n=e.getParentIssueKey(t,{configOptions:r.configOptions});if(n!=null)return{label:n,url:a+"/browse/"+n,hint:"",resolution:null}}return null},c=function(e){var t=null;if(e!=null){t=[];var n=Object.keys(e.rows);for(var r in n){var i=n[r],s=e.rows[i],o=[],u=s.rowKey.issue;if(u!=null){var a=u.fields.priority,c=u.fields.issuetype;o=[{url:c.iconUrl,title:c.name+" - "+c.description},{url:a.iconUrl,title:a.name}]}t.push({label:DrawHelper.correctIfDate(i),data:s.sum,link:f(i,u),icons:o,masterLink:l(u)})}}return t},h={hoursPerDay:8,daysPerWeek:5,decimalSeparator:".",prettyDuration:!1},p=function(){var e=$(i).find(".legend");e.find("table").css("font-size",""),e.find("table tr:first").first().before('<tr><th colspan="2"><br id="sliderPlaceholder"/></th></tr>'),e.find("#sliderPlaceholder").before(n("<pivottable-slider />")(r)),e.find("table tbody").first().append('<tr><td colspan="2"><br/>'+t("{{'Total' | i18n}}")(r)+" <b>"+DrawHelper.getFormattedTime(r[s.ngModel].sum,h)+"</b>"+"</td>"+"</tr>")};r.$watch(s.ngModel,function(e){if(r.loading==1)$(i).append('<span class="aui-icon aui-icon-wait" style="position: relative; left: 60px; top: 0; margin: 30px;">Wait</span>');else{$(i).find(".aui-icon-wait").remove();var t=c(e);if(t!=null&&t.length>0)o==null?(o=$.plot(i,t,{series:{pie:{show:!0,radius:.9,label:{show:!0,radius:.8,formatter:function(e,n){return DrawHelper.composeTooltip(n.label,n,t)},background:{opacity:.8},threshold:.05},offset:{left:-Math.round(u/2)}}},grid:{color:"#000"},legend:{show:!0,margin:[0,23],labelFormatter:function(e,n){return DrawHelper.composeLegendTooltip(e,n,t,h)}}}),i.show()):(o.setData(t),o.setupGrid(),o.draw()),p(),$(i).resize(p);else if(r.startDate!=null||r.endDate!=null)if(!i.has("pivottable-slider").length){$(i).css("position","absolute");var s='<div style="position: absolute; left: 60px; top: 0; margin: 30px;"><b>NO DATA</b></div><div class="legend"><table style="position: absolute; top: 23px; right: 0; color: rgb(0, 0, 0); width: 215px" width="215px"><tr><th colspan="2"><pivottable-slider /></th></tr></table></div>';i.append(n(s)(r))}}})}}}]),e.directive("auiInlineDialog",["$compile","$timeout","$window",function(e,t,n){return{restrict:"E",scope:{template:"@",container:"=",popupData:"=",initFn:"&"},link:function(n,r,i){n.hostBaseUrl=n.$parent.hostBaseUrl;var s=AJS.InlineDialog(n.container,"auiPopup",function(r,i,s){var o="<ng-include src=\"'"+n.template+"'\"></ng-include>";return t(function(){r.css("padding","5px").html(e(o)(n))},0),s(),!1},{useLiveEvents:!0,noBind:!n.container,initCallback:function(e){this.popup.refresh()}});n.closePopup=function(){s.hide()},n.initFn({params:{dialog:s,scope:n}})}}}]),e.directive("enterPressed",[function(){return{require:"ngModel",link:function(e,t,n,r){t.bind("keydown keypress",function(t){t.which===13&&r.$valid&&(e.$apply(function(){e.$eval(n.enterPressed)}),t.preventDefault())})}}}])}),define("app/filters/timesheetFilters",["app/timesheetApp"],function(e){e.filter("prettyHours",[function(){return function(e){var t=e&&typeof e=="object"?e.sum:parseInt(e)||0;return t!=0?(Math.round(t/36)/100).toLocaleString()+"h":""}}]),e.filter("timeago",[function(){return function(e){var t=moment(e);return t.isValid()?t.fromNow():e}}]),e.filter("timeTracking",["$sce",function(e){return function(t){var n=t.value||t;if(n.timespent==0)return e.trustAsHtml("&nbsp;");var r=Math.round(n.timespent*100/(n.estimate+n.timespent)),i=100-r,s='<table cellpadding="0" cellspacing="0" border="0"><tr><td style="padding: 0; margin: 0"><table border="0" width="100px" style="font-size: 5px;" cellpadding="0" cellspacing="0"><tr>'+(r>0?'<td style="width:'+r+'%; background-color: #51a825;">&nbsp;</td>':"")+(i>0?'<td style="width:'+i+'%; background-color: #ec8e00;">&nbsp;</td>':"")+"</tr></table>"+"</td>"+'<td style="margin: 0; padding: 0 0 0 5px">'+r+"%"+"</td>"+"</tr></table>";return e.trustAsHtml(s)}}])});var PivotKey={};PivotKey.Generic=function(e,t,n){this.keyName=e,this.keyValue=t,this.filterName=n},PivotKey.Issue=function(e,t,n){this.issue=e,this.keyName="issue",this.keyValue=this.issue.key},PivotKey.User=function(e){this.user=e.author,this.keyName="user",this.keyValue=e.author?e.author.name:"anonymous"},PivotKey.getStatus=function(e,t){var n=TimesheetUtils.convertDate(e.started),r=t.fields.status.name,i=new Date,s=t.changelog?t.changelog:{},o=s.histories?s.histories:[];for(var u=0;u<o.length;u++){var a=o[u],f=a.items||[],l=TimesheetUtils.convertDate(a.created);for(var c=0;c<f.length;c++){var h=f[c];h.fieldtype=="jira"&&h.field=="status"&&n<l&&i>l&&(r=h.fromString,i=l)}}return r},PivotKey.Status=function(e,t){this.keyName="status",this.keyValue=PivotKey.getStatus(e,t)},PivotKey.HourOfTheDay=function(e){this.keyName="dayOfTheWeek",this.date=TimesheetUtils.truncateMinutes(e),this.keyValue=this.date.getTime()},PivotKey.DayOfTheWeek=function(e){this.keyName="dayOfTheWeek",this.date=TimesheetUtils.truncateTime(e),this.keyValue=this.date.getTime()},PivotKey.WeekOfTheYear=function(e){this.keyName="weekOfTheYear",this.startDate=TimesheetUtils.getPrevMonday(e),this.endDate=TimesheetUtils.addDays(e,7),this.weekNumber=TimesheetUtils.getNormalizedWeekNumber(e),this.keyValue=this.startDate.getTime()},PivotKey.MonthOfTheYear=function(e){this.keyName="monthOfTheYear",this.startDate=TimesheetUtils.getFirstDayOfTheMonth(e),this.endDate=TimesheetUtils.getLastDayOfTheMonth(e),this.monthKey=TimesheetUtils.getMonthKey(e),this.keyValue=this.startDate.getTime()},PivotKey.makeIssueFieldKey=function(e){var t="&nbsp;",n=function(e){return typeof e=="object"&&e.hasOwnProperty("name")?e.name:typeof e=="object"&&e.hasOwnProperty("key")?e.key:typeof e=="object"&&e.hasOwnProperty("value")?e.value:e},r=function(e){if(TimesheetUtils.isDate(e))return TimesheetUtils.truncateTime(moment(e).toDate());if(Array.isArray(e)){var t="";return e.forEach(function(e){t.length>0&&(t+=", "),t+=n(e)}),t}return n(e)};return function(n,i,s){this._issue=n;var o=this._issue.fields[e]||(e=="parent"?{key:n.key}:t);this.field=e!="project"?o:t,this.project=this._issue.fields.project,this.keyName=e,this.keyValue=this.project.key+":"+r(this.field)}},PivotKey.groupByWorkedUserKey=function(e,t,n){var r="&nbsp;";this._issue=e,this._worklog=t,this.field=this._worklog.author||r,this.keyName="workeduser",this.keyValue=this.field.name||r},define("app/pivottable/PivotKey",function(){}),PivotRow.prototype.add=function(e){for(var t=0;t<e.columnKeys.length;t++){var n=e.columnKeys[t],r=e.values[n.keyValue],i=PivotTable.getOrCreate(this.columns,n,PivotColumn);i.add(e,r)}return isNaN(e.value)||(this.sum+=e.value),this.data.push(e),i},define("app/pivottable/PivotRow",function(){}),PivotColumn.prototype.add=function(e,t){this.entries.push(e);if(!isNaN(t))this.sum+=t;else if(typeof t=="object")for(var n in t)isNaN(t[n])||(this.value[n]=t[n]+(this.value[n]||0))},define("app/pivottable/PivotColumn",function(){}),PivotEntry.prototype.addColumn=function(e,t){this.columnKeys.push(e),this.values[e.keyValue]=t},define("app/pivottable/PivotEntry",function(){}),TimesheetStrategy.getStrategyOptions=function(e){var t=e.monthView,n=e.endDate?TimesheetUtils.addDays(e.endDate,-6):TimesheetUtils.getLastMondayDate(),r=e.startDate?moment(e.startDate).toDate():t?TimesheetUtils.addDays(n,-21):n,i=e.endDate?moment(e.endDate).toDate():t?TimesheetUtils.addDays(r,27):TimesheetUtils.addDays(r,6),s={startDate:r,endDate:i};return e.worklogAuthors?s.worklogAuthors=e.worklogAuthors:e.user&&(s.worklogAuthors=[e.user]),s.includeEmpty=e.includeEmpty,s},TimesheetStrategy.prototype.getEntries=function(e){var t=[],n=e.worklog||e.fields.worklog;for(var r=0;r<n.worklogs.length;r++){var i=n.worklogs[r],s=new this.rowKeyClass(e,i,this.configOptions),o=TimesheetUtils.convertDate(i.started,i.author?i.author.timeZone:null),u=TimesheetUtils.addDays(this.options.endDate,1);if(o>=this.options.startDate&&o<u)if(!this.options.worklogAuthors||i.author&&this.options.worklogAuthors.indexOf(i.author.name.toLowerCase())>=0){var a=new this.columnKeyClass(o),f=new WorkedTimePivotEntry(s,a,i);t.push(f)}}if(this.options.includeEmpty&&t.length==0){var f=new EmptyPivotEntry(s,a,i);t.push(f)}return t},TimesheetStrategy.prototype.getYearColumns=function(){return this.getColumns(TimesheetUtils.getMonthForYear)},TimesheetStrategy.prototype.getMonthColumns=function(){return this.getColumns(TimesheetUtils.getWeeksForMonth)},TimesheetStrategy.prototype.getWeekColumns=function(){return this.getColumns(TimesheetUtils.getDatesForWeek)},TimesheetStrategy.prototype.getDayColumns=function(){return this.getColumns(TimesheetUtils.getHoursForDay)},TimesheetStrategy.prototype.getColumns=function(e){return e(this.options).map(function(e){var t=new this.columnKeyClass(moment(e.date).toDate());return t.isToday=e.isToday,t},this).reduce(function(e,t){return e[t.keyValue]=new PivotColumn(t),e},{})},define("app/pivottable/TimesheetStrategy",function(){}),WorkedTimePivotStrategy.getStrategyOptions=function(e){var t={startDate:e.startDate,endDate:e.endDate};return e.worklogAuthors&&(t.worklogAuthors=e.worklogAuthors),t},WorkedTimePivotStrategy.prototype.getEntries=function(e){var t=[],n=e.worklog||e.fields.worklog;for(var r=0;r<n.worklogs.length;r++){var i=n.worklogs[r],s=new this.rowKeyClass(e,i,this.configOptions),o=!0,u=TimesheetUtils.convertDate(i.started,i.author?i.author.timeZone:null);this.options.startDate&&(o=u>=this.options.startDate);if(this.options.endDate){var a=TimesheetUtils.addDays(this.options.endDate,1);o=o&&u<a}var f=!this.options.worklogAuthors||i.author&&this.options.worklogAuthors.indexOf(i.author.name.toLowerCase())>=0;if(o&&f){var l=new this.columnKeyClass(i,e),c=new WorkedTimePivotEntry(s,l,i);t.push(c)}}return t},TimeTrackingStrategy.prototype.getEntries=function(e){var t=new this.rowKeyClass(e,this.configOptions),n=new PivotKey.Generic("PlannedVsActual","1timeoriginalestimate"),r=new PivotKey.Generic("PlannedVsActual","2esttimeremaining"),i=new PivotKey.Generic("PlannedVsActual","3timespent"),s=new PivotKey.Generic("PlannedVsActual","4diff"),o=new PivotKey.Generic("PlannedVsActual","5progress","timeTracking"),u=e.fields.timeoriginalestimate||0,a=new PivotEntry(t,n,u),f=e.fields.timespent||0,l=e.fields.timeestimate||0;return a.addColumn(r,l),a.addColumn(i,f),a.addColumn(s,u-f-l),a.addColumn(o,{estimate:l,timespent:f}),[a]},define("app/pivottable/PivotStrategy",function(){}),PivotTable.prototype.add=function(e){var t=this.pivotStrategy.getEntries(e);for(o in t){var n=t[o],r=this.pivotStrategy.pivotRowType||PivotRow,i=this,s=PivotTable.getOrCreate(this.rows,n.rowKey,r,function(){i.pivotStrategy.getColumnsFunction&&(this.columns=i.pivotStrategy.getColumnsFunction())});s.add(n);for(var o=0;o<n.columnKeys.length;o++){var u=n.columnKeys[o],a=n.values[u.keyValue],f=PivotTable.getOrCreate(this.totals,u,PivotColumn);f.add(n,a)}isNaN(n.value)||(this.sum+=n.value)}return t};var PivotTableType={Timesheet:1,IssueWorkedTimeByUser:2,IssueWorkedTimeByStatus:3,TimeTracking:4,PieChart:5},PivotTableFactory={};PivotTableFactory.createPivotTable=function(e){var t,n=e.groupByField;switch(PivotTableType[e.pivotTableType]){case PivotTableType.PieChart:case PivotTableType.IssueWorkedTimeByUser:n?n=="workeduser"?t=new WorkedTimePivotStrategy(PivotKey.groupByWorkedUserKey,PivotKey.User,e):t=new WorkedTimePivotStrategy(PivotKey.makeIssueFieldKey(n),PivotKey.User,e):t=new WorkedTimePivotStrategy(PivotKey.Issue,PivotKey.User,e);break;case PivotTableType.IssueWorkedTimeByStatus:n?n=="workeduser"?t=new WorkedTimePivotStrategy(PivotKey.groupByWorkedUserKey,PivotKey.Status,e):t=new WorkedTimePivotStrategy(PivotKey.makeIssueFieldKey(n),PivotKey.Status,e):t=new WorkedTimePivotStrategy(PivotKey.Issue,PivotKey.Status,e);break;case PivotTableType.TimeTracking:n?t=new TimeTrackingStrategy(PivotKey.makeIssueFieldKey(n),e):t=new TimeTrackingStrategy(PivotKey.Issue,e);break;case PivotTableType.Timesheet:var r=e.monthView,i=r?PivotKey.WeekOfTheYear:PivotKey.DayOfTheWeek,s=this.createPivotKey(e,i);n?n=="workeduser"?t=new TimesheetStrategy(PivotKey.groupByWorkedUserKey,s,e):t=new TimesheetStrategy(PivotKey.makeIssueFieldKey(n),s,e):t=new TimesheetStrategy(PivotKey.Issue,s,e);var o=r?t.getMonthColumns:t.getWeekColumns;t.getColumnsFunction=this.createGetColumnFunction(t,e,o);break;case PivotTableType.TimeEntry:e.startDate=moment().startOf("day").hours(8),e.endDate=moment().endOf("day").hours(20),e.includeEmpty=!0,t=new TimesheetStrategy(PivotKey.Issue,PivotKey.HourOfTheDay,e),t.getColumnsFunction=t.getDayColumns;break;default:throw"Unknown PivotTable"}return new PivotTable(t)},PivotTable.getOrCreate=function(e,t,n,r){var i=e[t.keyValue];return i==undefined&&(i=new n(t),r&&r.apply(i),e[t.keyValue]=i),i},PivotTableFactory.createGetColumnFunction=function(e,t,n){var r=n;if(t!=null)switch(t.sum){case"month":r=e.getYearColumns;break;case"week":r=e.getMonthColumns;break;case"day":r=e.getWeekColumns}return r},PivotTableFactory.createPivotKey=function(e,t){var n=t;if(e!=null)switch(e.sum){case"month":n=PivotKey.MonthOfTheYear;break;case"week":n=PivotKey.WeekOfTheYear;break;case"day":n=PivotKey.DayOfTheWeek}return n},define("app/pivottable/PivotTable",function(){}),require.config({baseUrl:"/js",paths:{moment:"bower_components/moment/moment"}}),require(["lib/zef-angularjs-i18n/localization","bower_components/sprintf/src/sprintf","bower_components/moment-timezone/builds/moment-timezone-with-data-2010-2020","timesheetUtils","app/modules/configuration","app/modules/directives","app/template/GadgetSummary","app/template/TimesheetMenu","app/controllers/gadgetController","app/controllers/bitbucketController","app/controllers/timesheetController","app/controllers/configurationController","app/controllers/worklogController","app/services/pivottableService","app/directives/DrawHelper","app/directives/timesheetDirectives","app/filters/timesheetFilters","app/pivottable/PivotKey","app/pivottable/PivotRow","app/pivottable/PivotColumn","app/pivottable/PivotEntry","app/pivottable/TimesheetStrategy","app/pivottable/PivotStrategy","app/pivottable/PivotTable"],function(){var e=function(e,t){var n=(new RegExp("\\W"+e+"=([^&]+)")).exec(window.location.search),r=n?n[1]:t||"";return decodeURIComponent(r)},t=e("xdm_e")+e("cp");if(!t)return;if(window.AP){$(function(){angular.bootstrap(document,["timesheetApp"])});return}var n=function(){var e=document.getElementsByTagName("script");for(var t=0;t<e.length;t+=1){var n=e[t],r=n.getAttribute("src"),i;if(r&&(i=r.match(/\/app.js\?_=(\d+)/)))return i[1]}return 1}(),r=e("configuration"),i=e("dashboard"),s=!!i,o=e("dialog");(s||o)&&$("body").css("background","#fff"),s?$("body").addClass("is-gadget"):$("body").addClass("is-not-gadget");var u=e("v",1);u=="1"&&(mailerUrl=undefined);var a={isGadget:s,dashboardId:i,dashboardItemId:e("dashboardItem"),license:e("lic"),hostBaseUrl:t};if(r)window.mainController="ConfigurationController",window.mainTemplate="/templates/mainShort.html?_="+n,a.templates={menu:"/templates/configMenu.html?_="+n,configure:"/templates/configure.html?_="+n};else if(o){["deleteworklog","updateworklog","createworklog","addworklog"].indexOf(o)>=0&&(window.mainController="WorklogController",window.mainTemplate="/templates/dialog.html?_="+n,a.templates={});switch(o){case"deleteworklog":a.dialogType="delete",a.templates.dialog="/templates/dialogs/deleteWorklog.html?_="+n;break;case"updateworklog":a.dialogType="update",a.templates.dialog="/templates/dialogs/updateWorklog.html?_="+n;break;case"createworklog":a.dialogType="create",a.templates.dialog="/templates/dialogs/updateWorklog.html?_="+n;break;case"addworklog":a.dialogType="add",a.templates.dialog="/templates/dialogs/updateWorklog.html?_="+n;break;case"bitbucket":window.mainController="BitbucketController",window.mainTemplate="/templates/dialogs/bitbucket.html?_="+n}}else window.mainController="TimesheetController",window.mainTemplate="/templates/main.html?_="+n,a.templates={header:"/templates/header.html?_="+n,menu:"/templates/menu.html?_="+n,pivottable:"/templates/pivottable.html?_="+n,piechart:"/templates/pieChart.html?_="+n,timesheet:"/templates/timesheet.html?_="+n};window.i18nDefault="/i18n/default.json?_="+n,$.getScript(t+"/atlassian-connect/all.js",function(){$(function(){$("#content").html("<context items='"+JSON.stringify(a)+"' />"),angular.bootstrap(document,["timesheetApp"])})})}),define("app",function(){});